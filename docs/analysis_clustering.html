<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.553">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Thoughts and Advice on Writing your BAP - 18&nbsp; Geographically Clustered/Nested Data</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./analysis_mlogit.html" rel="next">
<link href="./analysis_robust.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<link href="site_libs/tabwid-1.1.3/tabwid.css" rel="stylesheet">

<script src="site_libs/tabwid-1.1.3/tabwid.js"></script>


  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="nav-sidebar floating slimcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./part_analysis.html">Practical Issues in Data Analysis</a></li><li class="breadcrumb-item"><a href="./analysis_clustering.html"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Geographically Clustered/Nested Data</span></a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Thoughts and Advice on Writing your BAP</a> 
        <div class="sidebar-tools-main">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./part_writing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Writing the Thesis</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./writing_01_structure.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Structuring the Thesis</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./writing_02_introduction.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">The Introduction</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./writing_03_review.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Review of Literature and Argument</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./writing_04_design.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Research Design/Data Section</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./writing_05_analyses.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Results/Analyses Section</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./writing_06_conclusion.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Conclusion</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./writing_07_general.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">General Writing Advice</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./part_research.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Doing Research</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./doing_01_research.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Finding Literature</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./doing_02_data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Finding and Evaluating Data</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./part_analysis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Practical Issues in Data Analysis</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./analysis_01.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Analysis Steps</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./analysis_02.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Some Practical Questions</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./analysis_rscript.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">R Script Files</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./analysis_discussion.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Discussing Your Model Results</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./analysis_03.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Regression Table Formatting Suggestion</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./analysis_04.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Combining (and Saving) Plots</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./analysis_pivot.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Reshaping Datasets</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./analysis_robust.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Heteroskedasticity and Robust Standard Errors</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./analysis_clustering.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Geographically Clustered/Nested Data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./analysis_mlogit.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Categorical DVs</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./analysis_ologit.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Ordinal DVs</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#an-example-of-the-problem" id="toc-an-example-of-the-problem" class="nav-link active" data-scroll-target="#an-example-of-the-problem"><span class="header-section-number">18.1</span> An Example of the Problem</a></li>
  <li><a href="#potential-solutions" id="toc-potential-solutions" class="nav-link" data-scroll-target="#potential-solutions"><span class="header-section-number">18.2</span> Potential Solutions</a>
  <ul>
  <li><a href="#focus-on-a-single-cluster" id="toc-focus-on-a-single-cluster" class="nav-link" data-scroll-target="#focus-on-a-single-cluster"><span class="header-section-number">18.2.1</span> Focus on a Single “Cluster”</a></li>
  <li><a href="#fixed-effects-clustered-standard-errors" id="toc-fixed-effects-clustered-standard-errors" class="nav-link" data-scroll-target="#fixed-effects-clustered-standard-errors"><span class="header-section-number">18.2.2</span> Fixed Effects + Clustered Standard Errors</a></li>
  <li><a href="#aggregation" id="toc-aggregation" class="nav-link" data-scroll-target="#aggregation"><span class="header-section-number">18.2.3</span> Aggregation</a></li>
  <li><a href="#mixedmulti-level-models" id="toc-mixedmulti-level-models" class="nav-link" data-scroll-target="#mixedmulti-level-models"><span class="header-section-number">18.2.4</span> Mixed/Multi-Level Models</a>
  <ul class="collapse">
  <li><a href="#basic-set-up-with-a-null-model" id="toc-basic-set-up-with-a-null-model" class="nav-link" data-scroll-target="#basic-set-up-with-a-null-model"><span class="header-section-number">18.2.4.1</span> Basic Set Up with a “Null” Model</a></li>
  <li><a href="#adding-predictor-variables" id="toc-adding-predictor-variables" class="nav-link" data-scroll-target="#adding-predictor-variables"><span class="header-section-number">18.2.4.2</span> Adding Predictor Variables</a></li>
  <li><a href="#comparison-with-earlier" id="toc-comparison-with-earlier" class="nav-link" data-scroll-target="#comparison-with-earlier"><span class="header-section-number">18.2.4.3</span> Comparison with Earlier</a></li>
  <li><a href="#to-center-or-not-to-center" id="toc-to-center-or-not-to-center" class="nav-link" data-scroll-target="#to-center-or-not-to-center"><span class="header-section-number">18.2.4.4</span> To Center or Not to Center?</a></li>
  <li><a href="#interactions" id="toc-interactions" class="nav-link" data-scroll-target="#interactions"><span class="header-section-number">18.2.4.5</span> Interactions</a></li>
  <li><a href="#assumptions" id="toc-assumptions" class="nav-link" data-scroll-target="#assumptions"><span class="header-section-number">18.2.4.6</span> Assumptions</a></li>
  </ul></li>
  <li><a href="#what-about-logit-models" id="toc-what-about-logit-models" class="nav-link" data-scroll-target="#what-about-logit-models"><span class="header-section-number">18.2.5</span> What about Logit Models?</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./part_analysis.html">Practical Issues in Data Analysis</a></li><li class="breadcrumb-item"><a href="./analysis_clustering.html"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Geographically Clustered/Nested Data</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span id="sec-geographically-clusterednested-data" class="quarto-section-identifier"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Geographically Clustered/Nested Data</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="annotated-cell-1"><pre class="sourceCode r code-annotation-code code-with-copy"><code class="sourceCode r"><span id="annotated-cell-1-1"><a href="#annotated-cell-1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Packages</span></span>
<span id="annotated-cell-1-2"><a href="#annotated-cell-1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(flextable)</span>
<span id="annotated-cell-1-3"><a href="#annotated-cell-1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rio)</span>
<span id="annotated-cell-1-4"><a href="#annotated-cell-1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="annotated-cell-1-5"><a href="#annotated-cell-1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(modelsummary)</span>
<span id="annotated-cell-1-6"><a href="#annotated-cell-1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(marginaleffects)</span>
<span id="annotated-cell-1-7"><a href="#annotated-cell-1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(broom)</span>
<span id="annotated-cell-1-8"><a href="#annotated-cell-1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(parameters)</span>
<span id="annotated-cell-1-9"><a href="#annotated-cell-1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(patchwork)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Consider the humble regression equation:</p>
<p><span class="math display">\[
y_{i} = b_{0} + (b_{1} * x_{1}) + ... + \epsilon_{i}
\]</span></p>
<p>We predict what value we expect our dependent variable (y) to take on given one or more independent variables ( <span class="math inline">\(x_{1}, x_{2}\)</span>, etc.). However, our predictions are never perfect. The error term ( <span class="math inline">\(\epsilon_{i}\)</span>) focuses on these differences - how far off is our prediction for a given observation used in fitting the model?</p>
<p>One important point is that we need to make assumptions about the nature and distribution of this error term if we wish to make inferences to the broader population from which we draw our sample. OLS models, for instance, assume that the error term is normally distributed around 0 and is homoskedastic. Another assumption that is relevant for both OLS and logistic regression is the <em>independent errors</em> assumption. Here, we assume that there is no correlation between the residuals of our model (the prediction errors) and the dependent variable - knowing that we make an over-estimate for one observation shouldn’t give us information about whether our prediction error for a different observation is an over- or under-estimate. These assumptions are important because they underlie the calculation fo the standard error and hence our statistical significance tests: if they are seriously violated, then our standard errors will be too small and our significance tests will be biased toward finding “significant” findings.</p>
<p>We can try and address heteroskedasticity in a few ways (e.g., transforming a variable, adding new variables, using robust standard errors as discussed in <a href="analysis_robust.html" class="quarto-xref"><span>Chapter 17</span></a>). The violation of normality is typically considered less of a problem if you have even a moderately sized dataset. What about the independent errors assumption?</p>
<p>The independent errors assumption could be violated in different ways. One threat is omitted variable bias, i.e., failing to include confounding variables in the model. This is a threat you should try and minimize albeit one you will almost certainly not perfectly avoid outside of an experiment. Measurement error could also lead to violations on this front, but you’re likely dealing with pre-made measures (and measurements) so there is likely nothing you could do here. A final threat is <em>clustered</em> or <em>nested</em> data, which refers to situations where you have (repeated) observations sampled from within some broader level of analysis. Examples include:</p>
<ul>
<li>Surveys such as the <a href="https://www.worldvaluessurvey.org/wvs.jsp" target="_blank">World Values Survey</a>, <a href="https://www.europeansocialsurvey.org/" target="_blank">European Social Survey</a>, <a href="https://www.vanderbilt.edu/lapop/about-americasbarometer.php" target="_blank">AmericasBarometer</a>, etc., where countries are sampled and then individuals sampled from <em>within</em> those countries.</li>
<li>Datasets such as the <a href="https://electionstudies.org/" target="_blank">American National Election Studies</a> (ANES) cumulative time series dataset which features data from each version of the ANES over time such that (different) individuals are clustered <em>within</em> survey years (i.e., respondents in 1972, respondents in 1976, etc.).</li>
<li>Datasets that involve repeated measurements of the same country over time (time series data), same individual over time (panel data), or perhaps simply repeated observations of the same individual at a single time point (repeated measures data).<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></li>
</ul>
<div class="no-row-height column-margin column-container"><div id="fn1"><p><sup>1</sup>&nbsp;You can probably imagine complex combinations of these different types of data. For instance, if I used data from the European Social Survey from each of its modules, I would have data on individuals clustered within a country within a year (or, a country-year).</p></div></div><p>The remainder of this document will discuss why this type of data violates the independent errors assumption and discuss some ways to analyze this type of data. The focus will be on geographically clustered data, i.e., individual survey respondents within a given country. However, the same considerations can be applied to other instances of geographical clustering (e.g., individuals sampled from different schools or from within different cities, etc.).</p>
<section id="an-example-of-the-problem" class="level2 page-columns page-full" data-number="18.1">
<h2 data-number="18.1" class="anchored" data-anchor-id="an-example-of-the-problem"><span class="header-section-number">18.1</span> An Example of the Problem</h2>
<p>Suppose that I was writing my thesis on the topic of regime satisfaction: why do people vary in how satisfied they are with the way that the political regime works in their country? There are lots of datasets with measures related to regime satisfaction, but perhaps I think that the World Values Survey is the most appropriate for my paper because it alone has a measure of my main independent variable.</p>
<p>The data I’ll work with is a subset of their Wave 7 data wherein individual respondents were sampled within 66 countries or territories across the world. Respondents were asked the following question: “On a scale from1 to 10 where ‘1’ is ‘not satisfied at all’ and ‘10’ is ‘completely satisfied’, how satisfied are you with how the political system is functioning in your country these days?</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="annotated-cell-2"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><span id="annotated-cell-2-1"><a href="#annotated-cell-2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load our data</span></span>
<span id="annotated-cell-2-2"><a href="#annotated-cell-2-2" aria-hidden="true" tabindex="-1"></a>wvs <span class="ot">&lt;-</span> <span class="fu">import</span>(<span class="st">"./data/wvs_small.rda"</span>)</span>
<span id="annotated-cell-2-3"><a href="#annotated-cell-2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="annotated-cell-2-4"><a href="#annotated-cell-2-4" aria-hidden="true" tabindex="-1"></a><span class="co">#Some cleaning </span></span>
<span id="annotated-cell-2-5"><a href="#annotated-cell-2-5" aria-hidden="true" tabindex="-1"></a>wvs <span class="ot">&lt;-</span> wvs <span class="sc">|&gt;</span> </span>
<span id="annotated-cell-2-6"><a href="#annotated-cell-2-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-2" data-target-annotation="1">1</button><span id="annotated-cell-2-7" class="code-annotation-target"><a href="#annotated-cell-2-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">country_name =</span> sjlabelled<span class="sc">::</span><span class="fu">as_label</span>(B_COUNTRY))</span>
<span id="annotated-cell-2-8"><a href="#annotated-cell-2-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="annotated-cell-2-9"><a href="#annotated-cell-2-9" aria-hidden="true" tabindex="-1"></a><span class="co">#A plot</span></span>
<span id="annotated-cell-2-10"><a href="#annotated-cell-2-10" aria-hidden="true" tabindex="-1"></a>wvs <span class="sc">|&gt;</span> </span>
<span id="annotated-cell-2-11"><a href="#annotated-cell-2-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(Q252)) <span class="sc">|&gt;</span> </span>
<span id="annotated-cell-2-12"><a href="#annotated-cell-2-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Q252) <span class="sc">|&gt;</span> </span>
<span id="annotated-cell-2-13"><a href="#annotated-cell-2-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tally</span>() <span class="sc">|&gt;</span> </span>
<span id="annotated-cell-2-14"><a href="#annotated-cell-2-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Q252, <span class="at">y =</span> n)) <span class="sc">+</span> </span>
<span id="annotated-cell-2-15"><a href="#annotated-cell-2-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>() <span class="sc">+</span> </span>
<span id="annotated-cell-2-16"><a href="#annotated-cell-2-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Regime Satisfaction</span><span class="sc">\n</span><span class="st">1 = Not Satisfied at All, 10 = Completely Satisfied"</span>, </span>
<span id="annotated-cell-2-17"><a href="#annotated-cell-2-17" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Count"</span>) <span class="sc">+</span></span>
<span id="annotated-cell-2-18"><a href="#annotated-cell-2-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)) <span class="sc">+</span> </span>
<span id="annotated-cell-2-19"><a href="#annotated-cell-2-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-annotation">
<dl class="code-annotation-container-hidden code-annotation-container-grid">
<dt data-target-cell="annotated-cell-2" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-2" data-code-lines="7" data-code-annotation="1">The <code>B_COUNTRY</code> variable indicates which country the respondent is in. It has numeric values with associated labels (e.g, 20 = a person is from Andorra). This nifty command from the <code>sjlabelled</code> package enables me to create a new character variable with those country labels as the data. This is much nicer for subsequent plotting, etc.</span>
</dd>
</dl>
</div>
<div class="cell-output-display">
<div id="fig-indiv-dist" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-indiv-dist-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="analysis_clustering_files/figure-html/fig-indiv-dist-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-indiv-dist-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;18.1: Distribution of Individual-Level Responses
</figcaption>
</figure>
</div>
</div>
</div>
<p><a href="#fig-indiv-dist" class="quarto-xref">Figure&nbsp;<span>18.1</span></a> summarizes the individual level responses to this question pooling across countries. Each bar provides the number of respondents in the survey who gave each response. We can see that there is variation here: there are people who are “completely satisfied” with the way democracy works in their country, people in the middle, and people who are “not satisfied at all”.<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a> We might think of modeling this variation by considering attributes of the respondents that vary between them. For instance, we could consider whether people with higher levels of education tend to give higher responses on this question than those with less education. Or, we could ask whether there are differences between people who identify with a political party and those that do not, or by ideological extremity, or by political news consumption, and so on, and so on. The unit of analysis would be the individual and the differences explained by things that vary between individuals.</p>
<div class="no-row-height column-margin column-container"><div id="fn2"><p><sup>2</sup>&nbsp;Mean = 5.32 , SD = 2.76 .</p></div><div id="fn3"><p><sup>3</sup>&nbsp;Some type of probability-based sample is used when selecting individual respondents in each country (see the “Fieldwork and Sampling” section <a href="https://www.worldvaluessurvey.org/WVSContents.jsp" target="_blank">here</a>). At the same time, I do think that the WVS uses a probability-based sampling procedure for selecting the <em>countries</em> involved.</p></div></div><p>The respondents on this survey are not atoms floating freely in space. Rather, the people conducting the survey used some type of sampling procedure to select some people to interview rather than others within particular countries with these countries being a sample of some sort from the broader population of countries in the world.<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a> We might intuitively think that <em>countries</em> also vary on this measure, i.e., the <em>average</em> level of democratic satisfaction may be higher in some countries than others. Let’s take a look:</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Country Averaegs</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>country_avgs <span class="ot">&lt;-</span> wvs <span class="sc">|&gt;</span> </span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(country_name) <span class="sc">|&gt;</span> </span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">dem_satis =</span> <span class="fu">mean</span>(Q252, <span class="at">na.rm =</span> T))</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="co">#Plot</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(country_avgs, <span class="fu">aes</span>(<span class="at">x =</span> dem_satis)) <span class="sc">+</span> </span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">fill =</span> <span class="st">'white'</span>, <span class="at">color =</span> <span class="st">'black'</span>) <span class="sc">+</span> </span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">"Mean Democratic Satisfaction within Country"</span>, </span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Regime Satisfaction"</span>) <span class="sc">+</span> </span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">10</span>), </span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>                     <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">1</span>, <span class="at">to =</span> <span class="dv">10</span>, <span class="at">by =</span> <span class="dv">1</span>)) <span class="sc">+</span> </span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="fig-country-dist" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-country-dist-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="analysis_clustering_files/figure-html/fig-country-dist-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-country-dist-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;18.2: Distribution of Country Averages
</figcaption>
</figure>
</div>
</div>
</div>
<p><a href="#fig-country-dist" class="quarto-xref">Figure&nbsp;<span>18.2</span></a> was constructed by first calculating the average score on the regime satisfaction measure in each country and then plotting the distribution via a histogram. We can see that there is also variation at this <em>level</em> of analysis as well: there is one country with a very low average level of satisfaction (around 2.5), others with rather high (around 8 or so), and countries in the middle.<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a> We can probably come up with some plausible suspects for things that would predict (and maybe even cause) this variation. Perhaps regime satisfaction is higher when <em>countries</em> are experiencing periods of economic growth, or among <em>countries</em> with lower levels of corruption, or in <em>countries</em> with more accountable governments, etc. A key point here: the source of this variation is something operating at the <em>country</em>-level, i.e., the predictors are things that vary <em>between countries</em>.</p>
<div class="no-row-height column-margin column-container"><div id="fn4"><p><sup>4</sup>&nbsp;The country at the lowest end is Brazil with an average of 2.59. The countries at the top are Tajikistan (8.09), Vietnam (7.61), and China (7.55).</p></div></div><p>We can get a final look at this data via <a href="#fig-indiv-country-dist" class="quarto-xref">Figure&nbsp;<span>18.3</span></a>, which plots the number of respondents <em>within</em> each country giving each response.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>wvs <span class="sc">|&gt;</span> </span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(Q252)) <span class="sc">|&gt;</span> </span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(country_name, Q252) <span class="sc">|&gt;</span> </span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tally</span>() <span class="sc">|&gt;</span> </span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Q252, <span class="at">y =</span> n)) <span class="sc">+</span> </span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>() <span class="sc">+</span> </span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> country_name) <span class="sc">+</span> </span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Regime Satisfaction</span><span class="sc">\n</span><span class="st">1 = Not Satisfied at All, 10 = Completely Satisfied"</span>, </span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Count"</span>) <span class="sc">+</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">3</span>,<span class="dv">5</span>,<span class="dv">7</span>,<span class="dv">9</span>)) <span class="sc">+</span> </span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="fig-indiv-country-dist" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-indiv-country-dist-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="analysis_clustering_files/figure-html/fig-indiv-country-dist-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-indiv-country-dist-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;18.3: Distribution of Individual Responses by Country
</figcaption>
</figure>
</div>
</div>
</div>
<p>Here we can perhaps better see that variation is occurring at two <em>levels</em>. Individuals within a country vary in regime satisfaction - some are the high end, some at the low, and others in the middle. Meanwhile, the distributions are not the same across countries - Brazil has <em>many</em> people at 1, China has many people at the high end, and so on.</p>
<p>The average level of regime satisfaction varies across countries. Per above, we can think of country-level attributes that might explain this variation (inequality, economic growth, corruption, etc.). Note that these are things that are a constant for people <em>within</em> a given country - everybody in Andorra is living under the same economic conditions, etc.<a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a> This is where the problem emerges. If we <em>pool</em> all of the individual-level data together into a single model (i.e., include all respondents from every country together in one single model), then the errors for people from a given country will likely be correlated with one another because the responses of these individuals will be influenced by a common causal influence that is not accounted for our in statistical model. We will have a violation of our independence of errors assumption, our errors will be biased downwards, and we may end up reject a “null” hypothesis that we shouldn’t.<a href="#fn6" class="footnote-ref" id="fnref6" role="doc-noteref"><sup>6</sup></a></p>
<div class="no-row-height column-margin column-container"><div id="fn5"><p><sup>5</sup>&nbsp;Well, in some “objective” sense. People may, and very often do, vary in their subjective experience of these variables. People differ, for instance, on whether they think the economy is “good” or “bad” even though the economy is technically the country’s economy is technically the same for everyone. This could reflect differences in social position and hence exposure to economic pressures, differences in information about economic performance, and perhaps even differences in motivations to perceive the world in attitude-consistent ways (e.g., government supporters could selectively downplay negative information and thereby come to a rosier view of the economy than non-supporters). For relevant reviews on perceptions of regime performance, and potential “biases” in them, see <a href="https://doi.org/10.1146/annurev.polisci.10.050806.155344" target="_blank">Anderson (2007)</a> and <a href="https://doi.org/10.1146/annurev-polisci-032211-212920" target="_blank">Huber and Malhotra (2013)</a>.</p></div><div id="fn6"><p><sup>6</sup>&nbsp;“A common cause” does not necessarily mean that everyone is reacting in the same way to the country-level stimulus. Rich and poor people could conceivably react very differently to the same level of inequality, for instance. <a href="https://doi.org/10.1111/j.1540-5907.2007.00298.x" target="_blank">Solt (2008)</a> argues as such in this article on political engagement. People might also vary in how aware they are of a particular stimulus (e.g., the unemployment rate). This is something that could be investigated empirically via the final solution discussed below.</p></div></div><p>How, then, can we deal with this type of data?</p>
</section>
<section id="potential-solutions" class="level2 page-columns page-full" data-number="18.2">
<h2 data-number="18.2" class="anchored" data-anchor-id="potential-solutions"><span class="header-section-number">18.2</span> Potential Solutions</h2>
<p>The following sub-sections describe different ways of approaching geographically clustered/nested data. Perhaps the key difference between them is this: at what level are your independent variables being measured? In other words: what is the appropriate level of analysis for your hypothesis? The answer to this question will help inform which path is best suited for your project.</p>
<section id="focus-on-a-single-cluster" class="level3 page-columns page-full" data-number="18.2.1">
<h3 data-number="18.2.1" class="anchored" data-anchor-id="focus-on-a-single-cluster"><span class="header-section-number">18.2.1</span> Focus on a Single “Cluster”</h3>
<p>The problem above emerges when we pool observations from clusters together with one another. If your main IV is at the individual level, then a simple solution would be to simply focus on respondents from a single country by filtering out observations from other countries.</p>
<p>For instance, let’s say we hypothesize that regime satisfaction will be positively associated with a person’s financial situation. The WVS asks respondents “how satisfied are you with the financial situation of your household” on a 1 (completely dissatisfied) to 10 (completely satisfied) response scale (variable <code>Q50</code>). Perhaps we are interested in the case of New Zealand in particular. We would first filter out observations from other countries and regress our DV on the IV (along with plausible confounding variables; see <a href="analysis_02.html" class="quarto-xref"><span>Chapter 11</span></a>). For instance:</p>
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-5"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><span id="annotated-cell-5-1"><a href="#annotated-cell-5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter</span></span>
<span id="annotated-cell-5-2"><a href="#annotated-cell-5-2" aria-hidden="true" tabindex="-1"></a>nz <span class="ot">&lt;-</span> wvs <span class="sc">|&gt;</span> </span>
<span id="annotated-cell-5-3"><a href="#annotated-cell-5-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(country_name <span class="sc">==</span> <span class="st">"New Zealand"</span>)</span>
<span id="annotated-cell-5-4"><a href="#annotated-cell-5-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="annotated-cell-5-5"><a href="#annotated-cell-5-5" aria-hidden="true" tabindex="-1"></a><span class="co">#run our model</span></span>
<span id="annotated-cell-5-6"><a href="#annotated-cell-5-6" aria-hidden="true" tabindex="-1"></a>model_nz <span class="ot">&lt;-</span> <span class="fu">lm</span>(Q252 <span class="sc">~</span> Q50, <span class="at">data =</span> nz)</span>
<span id="annotated-cell-5-7"><a href="#annotated-cell-5-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="annotated-cell-5-8"><a href="#annotated-cell-5-8" aria-hidden="true" tabindex="-1"></a><span class="co">#summary of coefficients</span></span>
<span id="annotated-cell-5-9"><a href="#annotated-cell-5-9" aria-hidden="true" tabindex="-1"></a><span class="fu">tidy</span>(model_nz)</span>
<span id="annotated-cell-5-10"><a href="#annotated-cell-5-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="annotated-cell-5-11"><a href="#annotated-cell-5-11" aria-hidden="true" tabindex="-1"></a><span class="co">#predicted values via avg_predictions()</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-5" data-target-annotation="1">1</button><span id="annotated-cell-5-12" class="code-annotation-target"><a href="#annotated-cell-5-12" aria-hidden="true" tabindex="-1"></a><span class="fu">avg_predictions</span>(model_nz, <span class="at">variables =</span> <span class="st">"Q50"</span>)</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-hidden code-annotation-container-grid">
<dt data-target-cell="annotated-cell-5" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-5" data-code-lines="12" data-code-annotation="1">You learned about <code>predictions()</code> in Statistics II. <code>avg_predictions()</code> does something very similar - it calculates the average predicted value of Y given values of X. The main difference between the two commands concerns how control variables are handled: <code>predictions()</code> holds them at their mean/mode, while <code>avg_predictions()</code> makes predictions for each observations based on that observation’s unique values on the controls and then averages everything up after doing so. If there is only one predictor variable than the two commands converge on the same predicted values with <code>avg_predictions()</code> being a bit simpler to use with continuous variables (it will automatically calculate predictions at the min, 1st quartile, median, 3rd quartile, and maximum of the IV).</span>
</dd>
</dl>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 5
  term        estimate std.error statistic  p.value
  &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
1 (Intercept)    4.61     0.234      19.7  2.40e-73
2 Q50            0.127    0.0317      4.01 6.53e- 5

 Q50 Estimate Std. Error    z Pr(&gt;|z|)     S 2.5 % 97.5 %
   1     4.74     0.2035 23.3   &lt;0.001 395.9  4.34   5.14
   6     5.37     0.0766 70.2   &lt;0.001   Inf  5.22   5.52
   8     5.63     0.0756 74.5   &lt;0.001   Inf  5.48   5.78
   9     5.76     0.0931 61.9   &lt;0.001   Inf  5.57   5.94
  10     5.88     0.1167 50.4   &lt;0.001   Inf  5.65   6.11

Columns: Q50, estimate, std.error, statistic, p.value, s.value, conf.low, conf.high 
Type:  response </code></pre>
</div>
</div>
<p>We can see that there is a positive and statistically significant relationship here: regime satisfaction increases by 0.13 scale points, on average, with each one unit change on our financial situation variable. The overall degree of change when moving from minimum to maximum is fairly large: around 1.14 scale points. The SD for the DV in the New Zealand sub-sample is 2.21, so a min to max move is equal to a change of about half of a standard deviation. This seems non-trivial in scale, although note that we’d expect even those with very <em>negative</em> views of their financial situation, as well as those with very <em>positive</em> views of their financial situation, to be around the mid-point on regime satisfaction based on this model (predicted value of 4.74 when satisfaction = 1, 5.88 when it = 10). A politician who could get everybody feeling very positive about their financial situation would be better off than one who couldn’t, but they we’re probably not talking about “put the politician on money” levels of satisfaction.<a href="#fn7" class="footnote-ref" id="fnref7" role="doc-noteref"><sup>7</sup></a></p>
<div class="no-row-height column-margin column-container"><div id="fn7"><p><sup>7</sup>&nbsp;Maybe this is unfair: the measure is about <em>regime</em> satisfaction, not <em>leader</em> satisfaction.</p></div></div><p>This approach is very acceptable for your thesis. Its key advantage is analytic simplicity - just filter the data and fit the model you want to fit. Here, you’re just using the WVS, ESS, or whatever clustered data source as a convenient source of data for the country you care about. You would want to motivate the use of that particular source (rather than some other country-specific survey) by indicating why its measurements are particularly suitable for your project.</p>
<p>Of course, there are potential ‘pull’ considerations, i.e., reasons to think about alternatives.</p>
<p>First, this would make sense if the predictor variable you care about is something that varies at the individual level. If the IV you care about is something that varies between clusters/countries (e.g., inequality), then this does not work (unless, perhaps, you can find some type of subjective indicator - e.g., do people’s perception of inequality matter?).</p>
<p>Second, you do have to pick, and motivate the use of, a particular country to focus on and discuss how that decision influences what we learn about your question. In the former case, this could very well be part of the set up of your paper. For instance, if you begin your paper with an anecdote involving former German PM Angela Merkel, then it would seem obvious and non-controversial to use data focused on Germany in particular. You would still want to reflect in the discussion on whether the patterns you saw in the data might “travel” to other contexts (other times within Germany, other places besides) - if so, why do you think that? ; if not, in what ways would things be different and why? But, those are discussions you should be having anyways (see <a href="writing_06_conclusion.html" class="quarto-xref"><span>Chapter 6</span></a>). At the same time, there is some value in having a much more varied set of countries in the analyses as this would speak to such a concern to a certain degree at least in terms of geography.</p>
</section>
<section id="fixed-effects-clustered-standard-errors" class="level3" data-number="18.2.2">
<h3 data-number="18.2.2" class="anchored" data-anchor-id="fixed-effects-clustered-standard-errors"><span class="header-section-number">18.2.2</span> Fixed Effects + Clustered Standard Errors</h3>
<p>Here, your main IV varies at the individual level and you want to use all the data before you. The simplest solution is to use “country fixed effects” and “clustered standard errors”.</p>
<p>“Fixed effects” is just a fancy sounding term for: “Include a factor variable for cluster in your model”. The cluster in this example is country (respondents in countries). So, step one would be to convert the variable in the dataset with data on what cluster each observation resides within into a factor variable and include it in the model. I already have this variable factorized (see earlier syntax), so here are the model results:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co">#run our model</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>model_all_indiv <span class="ot">&lt;-</span> <span class="fu">lm</span>(Q252 <span class="sc">~</span> Q50 <span class="sc">+</span> country_name, <span class="at">data =</span> wvs)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="co">#summary of coefficients</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="fu">tidy</span>(model_all_indiv)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 48 × 5
   term                   estimate std.error statistic   p.value
   &lt;chr&gt;                     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;
 1 (Intercept)              4.59     0.0821     55.9   0        
 2 Q50                      0.182    0.00410    44.3   0        
 3 country_nameArgentina   -0.265    0.110      -2.41  1.60e-  2
 4 country_nameAustralia   -0.0539   0.0970     -0.556 5.79e-  1
 5 country_nameBangladesh   0.907    0.105       8.64  5.76e- 18
 6 country_nameBolivia     -0.217    0.0949     -2.29  2.23e-  2
 7 country_nameBrazil      -3.11     0.0977    -31.8   4.15e-220
 8 country_nameMyanmar      0.852    0.105       8.12  4.76e- 16
 9 country_nameChile       -0.220    0.111      -1.98  4.77e-  2
10 country_nameChina        1.79     0.0895     19.9   3.09e- 88
# ℹ 38 more rows</code></pre>
</div>
</div>
<p>Our main variable of interest is <code>Q50</code> (financial satisfaction). Here, we can see a positive and statistically significant coefficient for this variable - regime satisfaction tends to increase alongside one’s financial situation. We also get coefficients for the countries in our dataset (e.g., <code>country_nameArgentina</code>, etc.). These compare the average value of the DV in the named country against the common reference group (here, Andorra). Regime satisfaction is lower in Argentina than Andora by -0.265 on average, while being higher in China than Andorra by 1.79 points on average, and so on. Our results thus imply that if we compared people who differed by one unit on the financial situation measure but come from the same country, that we’d expect regime satisfaction to be higher by around 0.182 scale points, on average, among those with the higher financial satisfaction score.</p>
<p>The inclusion of these “fixed effects” essentially control for cluster-level sources of variation…whatever they might be. This accounts for the between-country differences above. However, it does not remove the bias from our standard errors. To fully accomplish this goal, we can use “clustered standard errors” - these are simply standard errors that are calculated in such a way they take into account the internal correlation within countries.</p>
<p>We can obtain the clustered standard errors when we use <code>modelsummary()</code> to create our regression tables. Here is how we can do it.</p>
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-7"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><span id="annotated-cell-7-1"><a href="#annotated-cell-7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">modelsummary</span>(model_all_indiv, </span>
<span id="annotated-cell-7-2"><a href="#annotated-cell-7-2" aria-hidden="true" tabindex="-1"></a>             <span class="at">stars =</span> T,</span>
<span id="annotated-cell-7-3"><a href="#annotated-cell-7-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">coef_map =</span> <span class="fu">c</span>(</span>
<span id="annotated-cell-7-4"><a href="#annotated-cell-7-4" aria-hidden="true" tabindex="-1"></a>               <span class="st">"(Intercept)"</span> <span class="ot">=</span> <span class="st">"Intercept"</span>, </span>
<span id="annotated-cell-7-5"><a href="#annotated-cell-7-5" aria-hidden="true" tabindex="-1"></a>               <span class="st">"Q50"</span> <span class="ot">=</span> <span class="st">"Personal Economic Situation"</span>), </span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-7" data-target-annotation="1">1</button><span id="annotated-cell-7-6" class="code-annotation-target"><a href="#annotated-cell-7-6" aria-hidden="true" tabindex="-1"></a>             <span class="at">vcov =</span> <span class="sc">~</span>country_name,</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-7" data-target-annotation="2">2</button><span id="annotated-cell-7-7" class="code-annotation-target"><a href="#annotated-cell-7-7" aria-hidden="true" tabindex="-1"></a>             <span class="at">gof_map =</span> <span class="fu">c</span>(<span class="st">"nobs"</span>, <span class="st">"r.squared"</span>, <span class="st">"adj.r.squared"</span>, <span class="st">"vcov.type"</span>),</span>
<span id="annotated-cell-7-8"><a href="#annotated-cell-7-8" aria-hidden="true" tabindex="-1"></a>             <span class="at">notes =</span> <span class="fu">list</span>(<span class="st">"Linear regression coefficients with standard errors in parentheses. Standard errors are clustered by country."</span>))</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-hidden code-annotation-container-grid">
<dt data-target-cell="annotated-cell-7" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-7" data-code-lines="6" data-code-annotation="1">This tells <code>modelsummary()</code> to use the clustered standard errors. Specifically, errors should be clustered by the <code>country_name</code> variable.</span>
</dd>
<dt data-target-cell="annotated-cell-7" data-target-annotation="2">2</dt>
<dd>
<span data-code-cell="annotated-cell-7" data-code-lines="7" data-code-annotation="2">The added bit here is <code>"vcov.type"</code>. This tells the command to include a row at the bottom of the table indicating that SEs are clustered by this variable. This could be omitted provided you indicate in the notes that you are clustering SEs in some way.</span>
</dd>
</dl>
</div>
<div class="cell-output-display">
 

  
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>tinytable_yu70umlpcgjltbuhbha2</title>
    <style>
.table td.tinytable_css_hhq5aen4sjbxahzbcfdi, .table th.tinytable_css_hhq5aen4sjbxahzbcfdi {    border-bottom: solid 0.1em #d3d8dc; }
.table td.tinytable_css_0yki3c3ingyztn9m0mhw, .table th.tinytable_css_0yki3c3ingyztn9m0mhw {    text-align: left; }
.table td.tinytable_css_x2x39s9hrqomkc5e9l8q, .table th.tinytable_css_x2x39s9hrqomkc5e9l8q {    text-align: center; }
.table td.tinytable_css_gjb4v3qtwbhrzgh01nqn, .table th.tinytable_css_gjb4v3qtwbhrzgh01nqn {    border-bottom: solid 0.05em black; }
    </style>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async="" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>
    MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']]
      },
      svg: {
        fontCache: 'global'
      }
    };
    </script>
  

  
    <div class="container">
      <table class="table table-borderless" id="tinytable_yu70umlpcgjltbuhbha2" style="width: auto; margin-left: auto; margin-right: auto;" data-quarto-disable-processing="true">
        <thead>
        
              <tr>
                <th scope="col"> </th>
                <th scope="col">(1)</th>
              </tr>
        </thead>
        <tfoot><tr><td colspan="2">+ p &lt; 0.1, * p &lt; 0.05, ** p &lt; 0.01, *** p &lt; 0.001</td></tr>
<tr><td colspan="2">Linear regression coefficients with standard errors in parentheses. Standard errors are clustered by country.</td></tr></tfoot>
        <tbody>
                <tr>
                  <td>Intercept                  </td>
                  <td>4.586***        </td>
                </tr>
                <tr>
                  <td>                           </td>
                  <td>(0.094)         </td>
                </tr>
                <tr>
                  <td>Personal Economic Situation</td>
                  <td>0.182***        </td>
                </tr>
                <tr>
                  <td>                           </td>
                  <td>(0.014)         </td>
                </tr>
                <tr>
                  <td>Num.Obs.                   </td>
                  <td>66688           </td>
                </tr>
                <tr>
                  <td>R2                         </td>
                  <td>0.213           </td>
                </tr>
                <tr>
                  <td>R2 Adj.                    </td>
                  <td>0.212           </td>
                </tr>
                <tr>
                  <td>Std.Errors                 </td>
                  <td>by: country_name</td>
                </tr>
        </tbody>
      </table>
    </div>

    <script>
      function styleCell_tinytable_mo1h6hb1adak61p6db42(i, j, css_id) {
        var table = document.getElementById("tinytable_yu70umlpcgjltbuhbha2");
        table.rows[i].cells[j].classList.add(css_id);
      }
      function insertSpanRow(i, colspan, content) {
        var table = document.getElementById('tinytable_yu70umlpcgjltbuhbha2');
        var newRow = table.insertRow(i);
        var newCell = newRow.insertCell(0);
        newCell.setAttribute("colspan", colspan);
        // newCell.innerText = content;
        // this may be unsafe, but innerText does not interpret <br>
        newCell.innerHTML = content;
      }
      function spanCell_tinytable_mo1h6hb1adak61p6db42(i, j, rowspan, colspan) {
        var table = document.getElementById("tinytable_yu70umlpcgjltbuhbha2");
        const targetRow = table.rows[i];
        const targetCell = targetRow.cells[j];
        for (let r = 0; r < rowspan; r++) {
          // Only start deleting cells to the right for the first row (r == 0)
          if (r === 0) {
            // Delete cells to the right of the target cell in the first row
            for (let c = colspan - 1; c > 0; c--) {
              if (table.rows[i + r].cells[j + c]) {
                table.rows[i + r].deleteCell(j + c);
              }
            }
          }
          // For rows below the first, delete starting from the target column
          if (r > 0) {
            for (let c = colspan - 1; c >= 0; c--) {
              if (table.rows[i + r] && table.rows[i + r].cells[j]) {
                table.rows[i + r].deleteCell(j);
              }
            }
          }
        }
        // Set rowspan and colspan of the target cell
        targetCell.rowSpan = rowspan;
        targetCell.colSpan = colspan;
      }

window.addEventListener('load', function () { styleCell_tinytable_mo1h6hb1adak61p6db42(0, 0, 'tinytable_css_hhq5aen4sjbxahzbcfdi') })
window.addEventListener('load', function () { styleCell_tinytable_mo1h6hb1adak61p6db42(0, 1, 'tinytable_css_hhq5aen4sjbxahzbcfdi') })
window.addEventListener('load', function () { styleCell_tinytable_mo1h6hb1adak61p6db42(0, 0, 'tinytable_css_0yki3c3ingyztn9m0mhw') })
window.addEventListener('load', function () { styleCell_tinytable_mo1h6hb1adak61p6db42(1, 0, 'tinytable_css_0yki3c3ingyztn9m0mhw') })
window.addEventListener('load', function () { styleCell_tinytable_mo1h6hb1adak61p6db42(2, 0, 'tinytable_css_0yki3c3ingyztn9m0mhw') })
window.addEventListener('load', function () { styleCell_tinytable_mo1h6hb1adak61p6db42(3, 0, 'tinytable_css_0yki3c3ingyztn9m0mhw') })
window.addEventListener('load', function () { styleCell_tinytable_mo1h6hb1adak61p6db42(4, 0, 'tinytable_css_0yki3c3ingyztn9m0mhw') })
window.addEventListener('load', function () { styleCell_tinytable_mo1h6hb1adak61p6db42(5, 0, 'tinytable_css_0yki3c3ingyztn9m0mhw') })
window.addEventListener('load', function () { styleCell_tinytable_mo1h6hb1adak61p6db42(6, 0, 'tinytable_css_0yki3c3ingyztn9m0mhw') })
window.addEventListener('load', function () { styleCell_tinytable_mo1h6hb1adak61p6db42(7, 0, 'tinytable_css_0yki3c3ingyztn9m0mhw') })
window.addEventListener('load', function () { styleCell_tinytable_mo1h6hb1adak61p6db42(8, 0, 'tinytable_css_0yki3c3ingyztn9m0mhw') })
window.addEventListener('load', function () { styleCell_tinytable_mo1h6hb1adak61p6db42(0, 1, 'tinytable_css_x2x39s9hrqomkc5e9l8q') })
window.addEventListener('load', function () { styleCell_tinytable_mo1h6hb1adak61p6db42(1, 1, 'tinytable_css_x2x39s9hrqomkc5e9l8q') })
window.addEventListener('load', function () { styleCell_tinytable_mo1h6hb1adak61p6db42(2, 1, 'tinytable_css_x2x39s9hrqomkc5e9l8q') })
window.addEventListener('load', function () { styleCell_tinytable_mo1h6hb1adak61p6db42(3, 1, 'tinytable_css_x2x39s9hrqomkc5e9l8q') })
window.addEventListener('load', function () { styleCell_tinytable_mo1h6hb1adak61p6db42(4, 1, 'tinytable_css_x2x39s9hrqomkc5e9l8q') })
window.addEventListener('load', function () { styleCell_tinytable_mo1h6hb1adak61p6db42(5, 1, 'tinytable_css_x2x39s9hrqomkc5e9l8q') })
window.addEventListener('load', function () { styleCell_tinytable_mo1h6hb1adak61p6db42(6, 1, 'tinytable_css_x2x39s9hrqomkc5e9l8q') })
window.addEventListener('load', function () { styleCell_tinytable_mo1h6hb1adak61p6db42(7, 1, 'tinytable_css_x2x39s9hrqomkc5e9l8q') })
window.addEventListener('load', function () { styleCell_tinytable_mo1h6hb1adak61p6db42(8, 1, 'tinytable_css_x2x39s9hrqomkc5e9l8q') })
window.addEventListener('load', function () { styleCell_tinytable_mo1h6hb1adak61p6db42(4, 0, 'tinytable_css_gjb4v3qtwbhrzgh01nqn') })
window.addEventListener('load', function () { styleCell_tinytable_mo1h6hb1adak61p6db42(4, 1, 'tinytable_css_gjb4v3qtwbhrzgh01nqn') })
    </script>

  


</div>
</div>
<dl>
<dt><code>vcov = ~country_name</code></dt>
<dd>
<p>This is the one line of syntax you need. You would replace “country_name” with the name of the (factor) variable in your dataset that concerns the relevant cluster.</p>
</dd>
<dt><code>gof_map = c("nobs", "r.squared", "adj.r.squared", "vcov.type")</code></dt>
<dd>
<p>One note here. There is a new entry: “vcov.type”. The final row of the table above is “Std. Errors” and then “by: country_name”. This option controls whether that information is presented or not. If I omit “vcov.type” from this part of the command, then that line is omitted. That is fine provided that one then indicates in the notes that standard errors are being clustered.</p>
</dd>
<dt><code>coef_map = c(…)</code></dt>
<dd>
<p><code>coef_map()</code> is another way of renaming variables in <code>modelsummary()</code>. I am using it here because anything that <em>doesn’t</em> match the contents of this command is <em>excluded</em> from the regression table. In this example, I wanted to exclude all of the country-level fixed effects estimates to avoid creating a super long table. I would recommend doing the same in your paper for the regression table presented in the main body of the text and then provide the full table (with all estimates) in an appendix. Or, alternatively, use a coefficient plot in the main text and then give the full table in an appendix.</p>
</dd>
</dl>
<p>One thing to note: the use of these “clustered standard errors” does not change the coefficient estimates - they only change the standard errors. I show this in the following snippet using <code>modelsummary()</code>. Here, I specify that the output should be a “modelsummary_list” - this tells the command to show the underlying data that is to be included in the table rather than the table itself. I then filter the results so that you only see the coefficient for our financial situation variable and its standard error. The coefficients remain the same, while the standard error becomes much larger (0.014 vs.&nbsp;0.004). This does not matter for statistical significance in the present case - we have <em>lots</em> of data to help us gain precision, but we could see differences in other contexts.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Without clustering standard errors: </span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="fu">modelsummary</span>(model_all_indiv, <span class="at">output =</span><span class="st">'modelsummary_list'</span>)<span class="sc">$</span>tidy <span class="sc">|&gt;</span> </span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(term, estimate, std.error) <span class="sc">|&gt;</span> </span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  term  estimate   std.error
1  Q50 0.1815909 0.004100451</code></pre>
</div>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co">#With clustering of standard errors</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">modelsummary</span>(model_all_indiv, <span class="at">output =</span><span class="st">'modelsummary_list'</span>, </span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">vcov =</span> <span class="sc">~</span>country_name)<span class="sc">$</span>tidy <span class="sc">|&gt;</span> </span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(term, estimate, std.error) <span class="sc">|&gt;</span> </span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  term  estimate  std.error
1  Q50 0.1815909 0.01425808</code></pre>
</div>
</div>
<p>We can also incorporate the clustering into our estimates of predicted values and slopes when using <code>predictions()</code> and <code>slopes()</code>. We only need to specify the <code>vcov =</code> option again.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">predictions</span>(model_all_indiv, </span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>            <span class="at">newdata =</span> <span class="fu">datagrid</span>(<span class="at">Q50 =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">8</span>, <span class="dv">10</span>)), </span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>            <span class="at">vcov =</span> <span class="sc">~</span>country_name)  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
 Q50 Estimate Std. Error     z Pr(&gt;|z|)   S 2.5 % 97.5 % country_name
   1     5.10    0.07826  65.2   &lt;0.001 Inf  4.95   5.26    Indonesia
   5     5.83    0.02122 274.8   &lt;0.001 Inf  5.79   5.87    Indonesia
   6     6.01    0.00696 863.3   &lt;0.001 Inf  6.00   6.03    Indonesia
   8     6.38    0.02155 295.8   &lt;0.001 Inf  6.33   6.42    Indonesia
  10     6.74    0.05007 134.6   &lt;0.001 Inf  6.64   6.84    Indonesia

Columns: rowid, estimate, std.error, statistic, p.value, s.value, conf.low, conf.high, country_name, Q50, Q252 
Type:  response </code></pre>
</div>
</div>
<p>You would use these procedures when your main IV is at the lower level of variation (e.g., the individual level of analysis) and want to use all of the data. However, what if your cared about variation at the <em>aggregate</em> level? This approach would not let you know about that since you’re subsuming all sources of variation into those country dummy variables. Including country-level variables would introduce multicollinearity. Instead, you’d need other tools. The next two sections are more relevant in those situations.</p>
</section>
<section id="aggregation" class="level3" data-number="18.2.3">
<h3 data-number="18.2.3" class="anchored" data-anchor-id="aggregation"><span class="header-section-number">18.2.3</span> Aggregation</h3>
<p>The preceding examples focus on a situation where the main IV is at the lower level of aggregation - i.e., at the individual level when we have data wherein individuals are nested within countries. If your main IV varies at the <em>higher</em> level of aggregation, e.g., the country level, then the simplest approach is likely to aggregate the data up to that level of analyses and proceed as normal. In other words, find the country-mean for the DV and then use that as the DV in subsequent regression model.</p>
<p>As an example, let’s suppose our argument is that regime satisfaction is predicted by economic conditions. In particular, we might expect that satisfaction will be higher in places with lower levels of unemployment (conversely, it should be lower in places with higher unemployment). The WVS thankfully includes a variable about the unemployment rate in each country (what a coincidence for my example), named <code>unemploytotal</code>. We can see a snippet of the data here - note how the data in the <code>unemploytotal</code> column is the same for all Argentine respondents.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>wvs <span class="sc">|&gt;</span> </span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(country_name, Q252, unemploytotal) <span class="sc">|&gt;</span> </span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">na.omit</span>() <span class="sc">|&gt;</span> </span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     country_name Q252 unemploytotal
1005    Argentina    3          9.79
1006    Argentina    4          9.79
1007    Argentina    5          9.79
1008    Argentina    5          9.79
1009    Argentina    7          9.79
1010    Argentina   10          9.79</code></pre>
</div>
</div>
<p>To prepare our data we’ll use <code>group_by()</code> to calculate the mean value of both variables by country. The unemployment variable is a constant within each country (i.e., all observations in Argentina have the same value [9.79], all observations in China have a value of 4.32, etc.). Taking the mean of this variable is the simplest way of porting over those values to our new dataset.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Aggregate the data </span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>aggregated <span class="ot">&lt;-</span> wvs <span class="sc">|&gt;</span> </span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(country_name) <span class="sc">|&gt;</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">reg_satis =</span> <span class="fu">mean</span>(Q252, <span class="at">na.rm =</span> T), </span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">unemploy =</span> <span class="fu">mean</span>(unemploytotal, <span class="at">na.rm =</span> T))</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a><span class="co">#Take a look</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>aggregated</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 48 × 3
   country_name reg_satis unemploy
   &lt;fct&gt;            &lt;dbl&gt;    &lt;dbl&gt;
 1 Andorra           5.78   NaN   
 2 Argentina         5.41     9.79
 3 Australia         5.74     5.27
 4 Bangladesh        6.76     4.19
 5 Bolivia           5.55     3.5 
 6 Brazil            2.59    12.1 
 7 Myanmar           6.57     1.58
 8 Chile             5.48     7.09
 9 China             7.55     4.32
10 Taiwan ROC        5.11   NaN   
# ℹ 38 more rows</code></pre>
</div>
</div>
<p>We could then proceed to examine this data via a scatterplot (since both variables are continuous) to see if our intuitions seem correct:</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Bivariate plot</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(aggregated, <span class="fu">aes</span>(<span class="at">x =</span> unemploy, <span class="at">y =</span> reg_satis)) <span class="sc">+</span> </span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">'lm'</span>) <span class="sc">+</span> </span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">"Mean Regime Satisfaction"</span>, </span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Unemployment (% of total labor force)"</span>) <span class="sc">+</span> </span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span> </span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">10</span>), </span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>                     <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">1</span>, <span class="at">to =</span> <span class="dv">10</span>, <span class="at">by =</span> <span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="fig-unemployment" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-unemployment-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="analysis_clustering_files/figure-html/fig-unemployment-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-unemployment-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;18.4: Unemployment &amp; Regime Satisfaction
</figcaption>
</figure>
</div>
</div>
</div>
<p>Indeed, we see a negatively sloped line: regime satisfaction tends to decrease as unemployment increases.</p>
<p>We could then proceed to a regression model.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Model</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>model_aggregated <span class="ot">&lt;-</span> <span class="fu">lm</span>(reg_satis <span class="sc">~</span> unemploy, <span class="at">data =</span> aggregated)</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="co">#Coefficients</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="fu">tidy</span>(model_aggregated)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 5
  term        estimate std.error statistic  p.value
  &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
1 (Intercept)   5.80      0.314      18.5  4.40e-22
2 unemploy     -0.0897    0.0414     -2.16 3.60e- 2</code></pre>
</div>
</div>
<p>We see a negative (and statistically significant) coefficient for unemployment. A 1% increase in the unemployment rate (since this variable is on the % scale) is associated with a drop of country average regime satisfaction of approximately -0.09 scale points. Moving from minimum to maximum is expected to result in a drop of approximately 1.5 scale points (5.73 to 4.25)…although an unemployment rate of 17% or so is pretty anomalous in our data so we get wide confidence intervals. This would represent a pretty large difference given that the DV has a standard deviation of 1.19.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">avg_predictions</span>(model_aggregated, <span class="at">variables =</span> <span class="st">"unemploy"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
 unemploy Estimate Std. Error     z Pr(&gt;|z|)     S 2.5 % 97.5 %
     0.75     5.73      0.288 19.88   &lt;0.001 289.8  5.16   6.29
     3.42     5.49      0.211 26.06   &lt;0.001 494.8  5.08   5.90
     4.59     5.39      0.188 28.72   &lt;0.001 600.2  5.02   5.75
     8.19     5.06      0.190 26.60   &lt;0.001 515.5  4.69   5.44
    17.24     4.25      0.485  8.76   &lt;0.001  58.9  3.30   5.20

Columns: unemploy, estimate, std.error, statistic, p.value, s.value, conf.low, conf.high 
Type:  response </code></pre>
</div>
</div>
<p>The model above only includes one predictor variable. We could (and should) include plausible confounding variable in the model as well. Note though that these are thing that should vary at the country-level. I sometimes see students who go down this path say they’ll include gender, and age, and individual demographics, but that may not make sense. One could aggregate up those variables and include them as well (or, alternatively, use some type of census data to obtain even better estimates of country-level values), but are they actually good confounds? Maybe, maybe not. Countries do not differ all that much in terms of sex/gender distributions (although there is some variation there). They may differ more in overall educational attainment or age patterns, but whether that makes sense to adjust for or not is something you’ll need to consider.</p>
</section>
<section id="mixedmulti-level-models" class="level3 page-columns page-full" data-number="18.2.4">
<h3 data-number="18.2.4" class="anchored" data-anchor-id="mixedmulti-level-models"><span class="header-section-number">18.2.4</span> Mixed/Multi-Level Models</h3>
<p>There is a final method for dealing with this type of data: “multilevel” or “mixed” models. The examples above saw us modeling <em>either</em> individual-level variation <em>or</em> country-level variation. A multilevel model enables us to do both things simultaneously in a single model. It can thus subsume the other approaches above. However, I do not recommend that you take this approach given that multilevel models are more complex and you have not been previously trained in their use. The only context in which they would be a better alternative for you is if you are investigating “cross-level interactions”: that is, a situation where you are interesting in examining the interaction between an individual-level variable and a cluster-level variable.</p>
<p>The remainder of this section will walk through how to set one of these models up and some basic interpretation. However, this is only the tip of a deeper iceberg.</p>
<section id="basic-set-up-with-a-null-model" class="level4 page-columns page-full" data-number="18.2.4.1">
<h4 data-number="18.2.4.1" class="anchored" data-anchor-id="basic-set-up-with-a-null-model"><span class="header-section-number">18.2.4.1</span> Basic Set Up with a “Null” Model</h4>
<p>We’ll need some extra R libraries for the following example:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lme4)</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lmerTest)</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(performance)</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(parameters)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><code>lme4</code> is the go-to package for fitting multilevel models. However, it does have one drawback: <code>modelsummary()</code> cannot produce statistical significance stars using a model created with this package. I thus also load <code>lmerTest</code> which adds that functionality. The <code>performance</code> package is one you’ve run into before: it helps produce various model performance statistics. Finally, the <code>parameters</code> package is kind of like <code>broom</code> in that it provides some tools for displaying the results of a regression model. I load it because <code>tidy()</code> cannot work with the output of objects created by <code>lmerTest</code>. (Confusing? You bet!)</p>
<p>Our first step is to fit a “null” model wherein the DV is only regressed on a constant.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>mixed_null <span class="ot">&lt;-</span> <span class="fu">lmer</span>(Q252 <span class="sc">~</span> <span class="dv">1</span> <span class="sc">+</span> (<span class="dv">1</span> <span class="sc">|</span> country_name), <span class="at">data =</span> wvs)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The syntax here looks kind of similar to the <code>lm()</code> command albeit with <code>lmer</code> rather than <code>lm()</code>. However, there is one very noticeable difference:</p>
<dl>
<dt><code>(1 | country_name)</code></dt>
<dd>
<p>This tells the command to perform a “random intercept” mixed model with observations nested within country. The intercept, recall, is the value we expect Y to take on when our IVs = 0. In a “random intercept” model, the intercept is allowed to take on different values across clusters. In essence, respondents in each country will have a different intercept value. The model will then average those intercepts together (in essence) as a grand summary. This is the simplest multi-level model we can run. It is also possible to run “random coefficient” versions wherein the coefficient for an IV is also allowed to vary across clusters before being averaged, but that is beyond the scope of this document. If you needed to run one of these models, you’d keep this as is but replace <code>country_name</code> with the name of the variable pertaining to relevant cluster in your analysis (<code>(1 | cluster_name)</code>).</p>
</dd>
</dl>
<p>Let’s take a look at the output:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mixed_null)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Linear mixed model fit by REML. t-tests use Satterthwaite's method [
lmerModLmerTest]
Formula: Q252 ~ 1 + (1 | country_name)
   Data: wvs

REML criterion at convergence: 312216.7

Scaled residuals: 
     Min       1Q   Median       3Q      Max 
-2.84879 -0.70666 -0.01245  0.66745  2.97927 

Random effects:
 Groups       Name        Variance Std.Dev.
 country_name (Intercept) 1.408    1.186   
 Residual                 6.182    2.486   
Number of obs: 66949, groups:  country_name, 47

Fixed effects:
            Estimate Std. Error      df t value Pr(&gt;|t|)    
(Intercept)   5.2410     0.1733 46.0121   30.23   &lt;2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
</div>
<p>The output begins in a somewhat familiar way as <code>lm()</code> with some information about the formula being used in the model and some residuals information, which we can largely ignore. It is then separated into two areas “Random Effects” and “Fixed Effects”. What do these mean? I like the description offered in this <a href="https://www.learn-mlms.com/04-module-4.html" target="_blank">resource</a>, which focuses on a scenario in which we are trying to model student test scores from students sampled from within various different schools:</p>
<blockquote class="blockquote">
<p>For our purposes of executing and interpreting MLMs, a fixed effect is an average effect across all clusters and a random effect is a variance that describes how much an effect differs across clusters. Generally, fixed effects in MLMs capture the mean of an effect and the random effect captures the variance of an effect. For example, we might have a fixed effect for the intercept that describes average math achievement across all schools. Then we have a random effect that describes how intercepts for math achievement vary across schools. Together, the fixed and random effect describe math achievement scores across schools.</p>
</blockquote>
<p>In our example, the Intercept value in the Fixed Effects area is an estimate of the average regime satisfaction across all <em>countries</em>. If we take the average in each country and then average together those country averages, this is more or less what we’ll get. We previously found the average within each country; here is the average of those averages, which is right in line with the Intercept above.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(aggregated<span class="sc">$</span>reg_satis, <span class="at">na.rm =</span> T)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5.240866</code></pre>
</div>
</div>
<p>What then do the values in the Random Effects tell us? We see two rows here: one for “country_name” and one for “Residual”. The value in the “country_name” value tell us about the degree of variation in the country-averages for regime satisfaction. Here, for instance, is the standard deviation of the country-averages that we calculated earlier, which is again in line with the value in the Random effects area:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sd</span>(aggregated<span class="sc">$</span>reg_satis, <span class="at">na.rm =</span> T)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1.188207</code></pre>
</div>
</div>
<p>The value for Residual, meanwhile, tells us about the variance/standard deviation of individuals around their country mean regime satisfaction. A multi-level model essentially “partitions” the variance in a DV into two “levels”: variance at level 1 owing to the lowest level of the model (here: individuals) and variance at level 2 owing to the higher level of aggregation (here: countries).<a href="#fn8" class="footnote-ref" id="fnref8" role="doc-noteref"><sup>8</sup></a> We can then model this variation by including predictors measured at either level as we’ll see in the next sub-section.</p>
<div class="no-row-height column-margin column-container"><div id="fn8"><p><sup>8</sup>&nbsp;Well, in a two-level model. These types of models can be made more complex.</p></div></div><p>We can get a sense of how much of the variance in our DV varies at each level via the <code>icc()</code> command from the <code>performance</code> package:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">icc</span>(mixed_null)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># Intraclass Correlation Coefficient

    Adjusted ICC: 0.185
  Unadjusted ICC: 0.185</code></pre>
</div>
</div>
<p>The value here is 0.185. In essence, this tells us the proportion of the total variance in the DV that occurs at the cluster level. We can think of this as telling us about the degree of similarity between respondents within the same country. The value of 0.185 indicates that around 18.5% of the total variance in the regime satisfaction DV is attributable to differences <em>between countries</em> (i.e., ~18.5% of the variance occurs at the country-level). That means that 0.815 or 81.5% occurs at the individual level. There is more variance between individuals than between countries. As a side note, if the ICC was very very low, then that might be an indicator that we shouldn’t bother with this multi-level model business - a simpler fixed effects model focused on individual level predictors would likely be a better idea since there wouldn’t be much cluster level variance to explain in the first place.</p>
</section>
<section id="adding-predictor-variables" class="level4" data-number="18.2.4.2">
<h4 data-number="18.2.4.2" class="anchored" data-anchor-id="adding-predictor-variables"><span class="header-section-number">18.2.4.2</span> Adding Predictor Variables</h4>
<p>We can add predictor variables much as we do with an <code>lm()</code> or <code>glm()</code> model. Here, I’ll perform three models: (1) one that only includes the individual level predictor (financial situation); (2) one that only includes the country level predictor (unemployment); and then one that includes both at once (for a later discussion).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Only individual</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>mixed_indiv <span class="ot">&lt;-</span> <span class="fu">lmer</span>(Q252 <span class="sc">~</span> Q50 <span class="sc">+</span> (<span class="dv">1</span> <span class="sc">|</span> country_name), <span class="at">data =</span> wvs)</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a><span class="co">#Only aggregate</span></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>mixed_agg <span class="ot">&lt;-</span> <span class="fu">lmer</span>(Q252 <span class="sc">~</span> unemploytotal <span class="sc">+</span> (<span class="dv">1</span> <span class="sc">|</span> country_name), <span class="at">data =</span> wvs)</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a><span class="co">#Both</span></span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a>mixed_both <span class="ot">&lt;-</span> <span class="fu">lmer</span>(Q252 <span class="sc">~</span> Q50 <span class="sc">+</span> unemploytotal <span class="sc">+</span> (<span class="dv">1</span> <span class="sc">|</span> country_name), <span class="at">data =</span> wvs)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Our interpretations of the coefficients from these models is basically the same as with an <code>lm()</code> model. The intercept tells us the expected average value when the predictor variable(s) = 0, while coefficients tell us about the slope of a line (continuous variable) or about a difference in means between categories (binary/categorical variables).</p>
<p>Let’s take a look at the individual-level model first. I’ll focus on the output from <code>parameters()</code> as this will get rid of the scientific notation that <code>summary()</code> would use when showing the coefficients in this particular example:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Via Summary</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mixed_indiv)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Linear mixed model fit by REML. t-tests use Satterthwaite's method [
lmerModLmerTest]
Formula: Q252 ~ Q50 + (1 | country_name)
   Data: wvs

REML criterion at convergence: 309059.7

Scaled residuals: 
    Min      1Q  Median      3Q     Max 
-3.1048 -0.7375  0.0226  0.6872  3.4004 

Random effects:
 Groups       Name        Variance Std.Dev.
 country_name (Intercept) 1.273    1.128   
 Residual                 6.004    2.450   
Number of obs: 66688, groups:  country_name, 47

Fixed effects:
             Estimate Std. Error        df t value Pr(&gt;|t|)    
(Intercept) 4.120e+00  1.668e-01 4.820e+01   24.70   &lt;2e-16 ***
Q50         1.818e-01  4.100e-03 6.668e+04   44.34   &lt;2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Correlation of Fixed Effects:
    (Intr)
Q50 -0.152</code></pre>
</div>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Via parameters::parameters()</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="fu">parameters</span>(mixed_indiv)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># Fixed Effects

Parameter   | Coefficient |       SE |       95% CI | t(66684) |      p
-----------------------------------------------------------------------
(Intercept) |        4.12 |     0.17 | [3.79, 4.45] |    24.70 | &lt; .001
Q50         |        0.18 | 4.10e-03 | [0.17, 0.19] |    44.34 | &lt; .001

# Random Effects

Parameter                    | Coefficient
------------------------------------------
SD (Intercept: country_name) |        1.13
SD (Residual)                |        2.45</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>
Uncertainty intervals (equal-tailed) and p-values (two-tailed) computed
  using a Wald t-distribution approximation.</code></pre>
</div>
</div>
<p>The intercept is 4.12. This tells us the following: the average regime satisfaction cross all countries when the financial situation variable = 0. The intercept is generally not very interesting and especially so in this case given that our IV cannot even taken on a value of 0 (since it ranges from 1 to 10). The coefficient for Q50 is more relevant. It is 0.18. We would interpret this as telling us that each one unit increase in subjective financial situation is associated with an average increase in regime satisfaction of around 0.18 scale points. <em>People</em> who are more financially satisfied are also more satisfied with their regime. This relationship is statistically significant as well (p &lt; 0.001).</p>
<p>We can get a sense of how important this change is via the <code>predictions()</code> command from the <code>margnialeffects</code> package. (Note: you can ignore the Warning message.)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">predictions</span>(mixed_indiv, <span class="at">newdata =</span> <span class="fu">datagrid</span>(<span class="at">Q50 =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">7</span>, <span class="dv">9</span>, <span class="dv">10</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: For this model type, `marginaleffects` only takes into account the
  uncertainty in fixed-effect parameters. You can use the `re.form=NA`
  argument to acknowledge this explicitly and silence this warning.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
 Q50 Estimate Std. Error    z Pr(&gt;|z|)     S 2.5 % 97.5 % country_name
   1     5.10      0.166 30.7   &lt;0.001 684.8  4.78   5.43    Indonesia
   3     5.47      0.165 33.0   &lt;0.001 793.1  5.14   5.79    Indonesia
   5     5.83      0.165 35.3   &lt;0.001 906.3  5.51   6.15    Indonesia
   7     6.19      0.165 37.6   &lt;0.001   Inf  5.87   6.52    Indonesia
   9     6.56      0.165 39.7   &lt;0.001   Inf  6.23   6.88    Indonesia
  10     6.74      0.166 40.7   &lt;0.001   Inf  6.41   7.06    Indonesia

Columns: rowid, estimate, std.error, statistic, p.value, s.value, conf.low, conf.high, country_name, Q50, Q252 
Type:  response </code></pre>
</div>
</div>
<p>What about the stuff in the Random effects area? The entry for “country_name” still tells us about the variation in the country means. This value is unchanged from above because we have not added any country-level predictor variables. The entry for Residual still tells us about individual-level variation around country-means. This value is slightly smaller than earlier because we have added a predictor variable that explains some of the total variation at the individual level.</p>
<p>Let’s turn to the country-level model:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mixed_agg)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Linear mixed model fit by REML. t-tests use Satterthwaite's method [
lmerModLmerTest]
Formula: Q252 ~ unemploytotal + (1 | country_name)
   Data: wvs

REML criterion at convergence: 302394.5

Scaled residuals: 
     Min       1Q   Median       3Q      Max 
-2.83604 -0.70387 -0.01185  0.66439  2.96728 

Random effects:
 Groups       Name        Variance Std.Dev.
 country_name (Intercept) 1.351    1.162   
 Residual                 6.234    2.497   
Number of obs: 64727, groups:  country_name, 45

Fixed effects:
              Estimate Std. Error       df t value Pr(&gt;|t|)    
(Intercept)    5.79713    0.31358 43.00928  18.487   &lt;2e-16 ***
unemploytotal -0.08967    0.04143 43.02262  -2.164    0.036 *  
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Correlation of Fixed Effects:
            (Intr)
unemployttl -0.833</code></pre>
</div>
</div>
<p>The Intercept here tells us the expected mean level of our dependent variable when the IV = 0, i.e., if unemployment = 0%, then we’d expect to observe the country-level average of regime satisfaction to be about 5.8. Meanwhile, a 1 unit (1% in this instance) increase in the unemployment rate is associated with a decrease of approximately -0.09 scale points on the DV.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">predictions</span>(mixed_agg, <span class="at">newdata =</span> <span class="fu">datagrid</span>(<span class="at">unemploytotal =</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: For this model type, `marginaleffects` only takes into account the
  uncertainty in fixed-effect parameters. You can use the `re.form=NA`
  argument to acknowledge this explicitly and silence this warning.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
 unemploytotal Estimate Std. Error    z Pr(&gt;|z|)     S 2.5 % 97.5 %
             1     6.43      0.280 23.0   &lt;0.001 385.8  5.89   6.98
             2     6.35      0.249 25.5   &lt;0.001 474.0  5.86   6.83
             3     6.26      0.221 28.3   &lt;0.001 582.8  5.82   6.69
             4     6.17      0.198 31.1   &lt;0.001 704.2  5.78   6.55
             5     6.08      0.182 33.4   &lt;0.001 811.3  5.72   6.43
             6     5.99      0.174 34.4   &lt;0.001 859.0  5.65   6.33
             7     5.90      0.176 33.5   &lt;0.001 815.5  5.55   6.24
             8     5.81      0.187 31.0   &lt;0.001 699.0  5.44   6.17
             9     5.72      0.206 27.7   &lt;0.001 558.6  5.31   6.12
            10     5.63      0.231 24.3   &lt;0.001 431.3  5.17   6.08
 country_name
    Indonesia
    Indonesia
    Indonesia
    Indonesia
    Indonesia
    Indonesia
    Indonesia
    Indonesia
    Indonesia
    Indonesia

Columns: rowid, estimate, std.error, statistic, p.value, s.value, conf.low, conf.high, country_name, unemploytotal, Q252 
Type:  response </code></pre>
</div>
</div>
<p>The coefficient for the country-level variable is smaller than the individual-level variable. We should perhaps be cautious about saying it is “less important” however. The degree of variation at the individual level is much larger than the amount of variation at the country-level as we saw from the Random effects estimates from the null model:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Uses the parameters() command and some filtering to focus</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a><span class="co">#our attention on the random effects</span></span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a><span class="fu">parameters</span>(mixed_null) <span class="sc">|&gt;</span> </span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Parameter <span class="sc">!=</span> <span class="st">"(Intercept)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># Random Effects

Parameter                    | Coefficient | 95% CI
---------------------------------------------------
SD (Intercept: country_name) |        1.19 |       
SD (Residual)                |        2.49 |       </code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code></code></pre>
</div>
</div>
<p>A smaller looking change might be more “meaningful” if there is less variance to explain the first place. One way of seeing this is to consider the standardized coefficients from the two models:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Individual </span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a><span class="fu">standardise_parameters</span>(mixed_indiv)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># Standardization method: refit

Parameter   | Std. Coef. |        95% CI
----------------------------------------
(Intercept) |      -0.03 | [-0.14, 0.09]
Q50         |       0.16 | [ 0.15, 0.17]</code></pre>
</div>
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Country</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a><span class="fu">standardise_parameters</span>(mixed_agg)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># Standardization method: refit

Parameter     | Std. Coef. |         95% CI
-------------------------------------------
(Intercept)   |      -0.02 | [-0.15,  0.10]
unemploytotal |      -0.13 | [-0.25, -0.01]</code></pre>
</div>
</div>
<p>Perhaps the important thing here to interpret the coefficients in relation to their level of analysis (e.g., individual level predictors explaining differences between individuals, country-level predictors explaining differences between countries).</p>
</section>
<section id="comparison-with-earlier" class="level4 page-columns page-full" data-number="18.2.4.3">
<h4 data-number="18.2.4.3" class="anchored" data-anchor-id="comparison-with-earlier"><span class="header-section-number">18.2.4.3</span> Comparison with Earlier</h4>
<p>Let’s compare our results to those from the earlier models (individual level fixed effect with clustered standard errors and the aggregated model).</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="co">#See the chapter on 'regression table formatting suggesion' </span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a><span class="co">#for an explanation of the flextable code</span></span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a><span class="co">#List</span></span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a>model_comps <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Indiv w/FE"</span> <span class="ot">=</span> model_all_indiv, </span>
<span id="cb52-7"><a href="#cb52-7" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Aggregated"</span> <span class="ot">=</span> model_aggregated, </span>
<span id="cb52-8"><a href="#cb52-8" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Multi-level"</span> <span class="ot">=</span> mixed_indiv, </span>
<span id="cb52-9"><a href="#cb52-9" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Multi-Level"</span> <span class="ot">=</span> mixed_agg, </span>
<span id="cb52-10"><a href="#cb52-10" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Multi-Level"</span> <span class="ot">=</span> mixed_both)</span>
<span id="cb52-11"><a href="#cb52-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-12"><a href="#cb52-12" aria-hidden="true" tabindex="-1"></a><span class="co">#Table with some flextable formatting</span></span>
<span id="cb52-13"><a href="#cb52-13" aria-hidden="true" tabindex="-1"></a>model_comps_table <span class="ot">&lt;-</span> <span class="fu">modelsummary</span>(model_comps, </span>
<span id="cb52-14"><a href="#cb52-14" aria-hidden="true" tabindex="-1"></a>             <span class="at">estimate =</span> <span class="st">"{estimate}{stars}</span><span class="sc">\n</span><span class="st">{std.error}"</span>, </span>
<span id="cb52-15"><a href="#cb52-15" aria-hidden="true" tabindex="-1"></a>             <span class="at">statistic =</span> <span class="cn">NULL</span>, </span>
<span id="cb52-16"><a href="#cb52-16" aria-hidden="true" tabindex="-1"></a>             <span class="at">gof_map =</span> <span class="fu">c</span>(<span class="st">"nobs"</span>, <span class="st">"r.squared"</span>, <span class="st">"adj.r.squared"</span>, </span>
<span id="cb52-17"><a href="#cb52-17" aria-hidden="true" tabindex="-1"></a>                         <span class="st">"r2.marginal"</span>, <span class="st">"r2.conditional"</span>),</span>
<span id="cb52-18"><a href="#cb52-18" aria-hidden="true" tabindex="-1"></a>             <span class="at">vcov =</span> <span class="fu">c</span>(<span class="sc">~</span> country_name, <span class="st">"classical"</span>, <span class="st">"classical"</span>, </span>
<span id="cb52-19"><a href="#cb52-19" aria-hidden="true" tabindex="-1"></a>                      <span class="st">"classical"</span>, <span class="st">"classical"</span>), </span>
<span id="cb52-20"><a href="#cb52-20" aria-hidden="true" tabindex="-1"></a>             <span class="at">coef_map =</span> <span class="fu">c</span>(</span>
<span id="cb52-21"><a href="#cb52-21" aria-hidden="true" tabindex="-1"></a>               <span class="st">"(Intercept)"</span> <span class="ot">=</span> <span class="st">"Intercept"</span>, </span>
<span id="cb52-22"><a href="#cb52-22" aria-hidden="true" tabindex="-1"></a>               <span class="st">"Q50"</span> <span class="ot">=</span> <span class="st">"Personal Financial Situation"</span>, </span>
<span id="cb52-23"><a href="#cb52-23" aria-hidden="true" tabindex="-1"></a>               <span class="st">"unemploy"</span> <span class="ot">=</span> <span class="st">"Country Unemployment Rate"</span>, </span>
<span id="cb52-24"><a href="#cb52-24" aria-hidden="true" tabindex="-1"></a>               <span class="st">"unemploytotal"</span> <span class="ot">=</span> <span class="st">"Country Unemployment Rate"</span>), </span>
<span id="cb52-25"><a href="#cb52-25" aria-hidden="true" tabindex="-1"></a>             <span class="at">notes =</span> <span class="fu">list</span>(<span class="st">"Notes: OLS or multi-level model coefficients with SEs in parentheses. Country fixed effect estimates omitted from FE model. FE model clusters SEs by country."</span>, </span>
<span id="cb52-26"><a href="#cb52-26" aria-hidden="true" tabindex="-1"></a>                          <span class="st">"* p &lt; 0.05; ** p &lt; 0.01; *** p &lt; 0.001"</span>),</span>
<span id="cb52-27"><a href="#cb52-27" aria-hidden="true" tabindex="-1"></a>             <span class="at">output =</span> <span class="st">'flextable'</span>)</span>
<span id="cb52-28"><a href="#cb52-28" aria-hidden="true" tabindex="-1"></a>             </span>
<span id="cb52-29"><a href="#cb52-29" aria-hidden="true" tabindex="-1"></a>             </span>
<span id="cb52-30"><a href="#cb52-30" aria-hidden="true" tabindex="-1"></a>model_comps_table <span class="sc">|&gt;</span> </span>
<span id="cb52-31"><a href="#cb52-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">hline</span>(<span class="at">i =</span> <span class="fu">nrow_part</span>(model_comps_table) <span class="sc">-</span> <span class="dv">3</span>) <span class="sc">|&gt;</span></span>
<span id="cb52-32"><a href="#cb52-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">align</span>(<span class="at">i =</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow_part</span>(model_comps_table), <span class="at">j =</span> <span class="dv">2</span><span class="sc">:</span><span class="fu">ncol_keys</span>(model_comps_table), <span class="at">align =</span> <span class="st">'center'</span>) <span class="sc">|&gt;</span></span>
<span id="cb52-33"><a href="#cb52-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">align</span>(<span class="at">align =</span> <span class="st">'center'</span>, <span class="at">part =</span> <span class="st">'header'</span>) <span class="sc">|&gt;</span> </span>
<span id="cb52-34"><a href="#cb52-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">autofit</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="tbl-comparison" class="cell quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-comparison-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;18.1: Comparison of Different Methods of Analysing Clustered Data
</figcaption>
<div aria-describedby="tbl-comparison-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<div class="tabwid"><style>.cl-4c07dae2{}.cl-4bfcfbae{font-family:'Arial';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-4c00dbca{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-4c00dbde{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-4c00f33a{width:2.255in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4c00f344{width:0.998in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4c00f34e{width:1.075in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4c00f358{width:0.973in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4c00f359{width:1.024in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4c00f362{width:1.066in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4c00f363{width:2.255in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4c00f36c{width:0.998in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4c00f376{width:1.075in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4c00f380{width:0.973in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4c00f381{width:1.024in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4c00f38a{width:1.066in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4c00f38b{width:2.255in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4c00f394{width:0.998in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4c00f39e{width:1.075in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4c00f39f{width:0.973in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4c00f3a8{width:1.024in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4c00f3b2{width:1.066in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4c00f3bc{width:2.255in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 1pt solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4c00f3bd{width:0.998in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 1pt solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4c00f3c6{width:1.075in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 1pt solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4c00f3c7{width:0.973in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 1pt solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4c00f3d0{width:1.024in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 1pt solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4c00f3da{width:1.066in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 1pt solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4c00f3db{width:2.255in;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4c00f3e4{width:0.998in;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4c00f3e5{width:1.075in;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4c00f3ee{width:0.973in;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4c00f3ef{width:1.024in;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4c00f3f8{width:1.066in;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4c00f3f9{width:2.255in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4c00f402{width:0.998in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4c00f403{width:1.075in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4c00f40c{width:0.973in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4c00f40d{width:1.024in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4c00f416{width:1.066in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4c00f417{width:2.255in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4c00f420{width:0.998in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4c00f421{width:1.075in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4c00f42a{width:0.973in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4c00f434{width:1.024in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4c00f43e{width:1.066in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4c00f448{width:2.255in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4c00f449{width:0.998in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4c00f44a{width:1.075in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4c00f452{width:0.973in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4c00f45c{width:1.024in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4c00f466{width:1.066in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4c00f470{width:2.255in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4c00f47a{width:0.998in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4c00f47b{width:1.075in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4c00f47c{width:0.973in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4c00f484{width:1.024in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-4c00f48e{width:1.066in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-4c07dae2"><thead><tr style="overflow-wrap:break-word;"><th class="cl-4c00f33a"><p class="cl-4c00dbca"><span class="cl-4bfcfbae"> </span></p></th><th class="cl-4c00f344"><p class="cl-4c00dbca"><span class="cl-4bfcfbae">Indiv w/FE</span></p></th><th class="cl-4c00f34e"><p class="cl-4c00dbca"><span class="cl-4bfcfbae">Aggregated</span></p></th><th class="cl-4c00f358"><p class="cl-4c00dbca"><span class="cl-4bfcfbae">Multi-level</span></p></th><th class="cl-4c00f359"><p class="cl-4c00dbca"><span class="cl-4bfcfbae">Multi-Level</span></p></th><th class="cl-4c00f362"><p class="cl-4c00dbca"><span class="cl-4bfcfbae">Multi-Level </span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-4c00f363"><p class="cl-4c00dbde"><span class="cl-4bfcfbae">Intercept</span></p></td><td class="cl-4c00f36c"><p class="cl-4c00dbca"><span class="cl-4bfcfbae">4.586***</span><br><span class="cl-4bfcfbae">0.094</span></p></td><td class="cl-4c00f376"><p class="cl-4c00dbca"><span class="cl-4bfcfbae">5.797***</span><br><span class="cl-4bfcfbae">0.314</span></p></td><td class="cl-4c00f380"><p class="cl-4c00dbca"><span class="cl-4bfcfbae">4.120***</span><br><span class="cl-4bfcfbae">0.167</span></p></td><td class="cl-4c00f381"><p class="cl-4c00dbca"><span class="cl-4bfcfbae">5.797***</span><br><span class="cl-4bfcfbae">0.314</span></p></td><td class="cl-4c00f38a"><p class="cl-4c00dbca"><span class="cl-4bfcfbae">4.581***</span><br><span class="cl-4bfcfbae">0.304</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-4c00f38b"><p class="cl-4c00dbde"><span class="cl-4bfcfbae">Personal Financial Situation</span></p></td><td class="cl-4c00f394"><p class="cl-4c00dbca"><span class="cl-4bfcfbae">0.182***</span><br><span class="cl-4bfcfbae">0.014</span></p></td><td class="cl-4c00f39e"><p class="cl-4c00dbca"><span class="cl-4bfcfbae"></span></p></td><td class="cl-4c00f39f"><p class="cl-4c00dbca"><span class="cl-4bfcfbae">0.182***</span><br><span class="cl-4bfcfbae">0.004</span></p></td><td class="cl-4c00f3a8"><p class="cl-4c00dbca"><span class="cl-4bfcfbae"></span></p></td><td class="cl-4c00f3b2"><p class="cl-4c00dbca"><span class="cl-4bfcfbae">0.182***</span><br><span class="cl-4bfcfbae">0.004</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-4c00f38b"><p class="cl-4c00dbde"><span class="cl-4bfcfbae">Country Unemployment Rate</span></p></td><td class="cl-4c00f394"><p class="cl-4c00dbca"><span class="cl-4bfcfbae"></span></p></td><td class="cl-4c00f39e"><p class="cl-4c00dbca"><span class="cl-4bfcfbae">-0.090*</span><br><span class="cl-4bfcfbae">0.041</span></p></td><td class="cl-4c00f39f"><p class="cl-4c00dbca"><span class="cl-4bfcfbae"></span></p></td><td class="cl-4c00f3a8"><p class="cl-4c00dbca"><span class="cl-4bfcfbae">-0.090*</span><br><span class="cl-4bfcfbae">0.041</span></p></td><td class="cl-4c00f3b2"><p class="cl-4c00dbca"><span class="cl-4bfcfbae">-0.074+</span><br><span class="cl-4bfcfbae">0.040</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-4c00f3bc"><p class="cl-4c00dbde"><span class="cl-4bfcfbae">Num.Obs.</span></p></td><td class="cl-4c00f3bd"><p class="cl-4c00dbca"><span class="cl-4bfcfbae">66688</span></p></td><td class="cl-4c00f3c6"><p class="cl-4c00dbca"><span class="cl-4bfcfbae">45</span></p></td><td class="cl-4c00f3c7"><p class="cl-4c00dbca"><span class="cl-4bfcfbae">66688</span></p></td><td class="cl-4c00f3d0"><p class="cl-4c00dbca"><span class="cl-4bfcfbae">64727</span></p></td><td class="cl-4c00f3da"><p class="cl-4c00dbca"><span class="cl-4bfcfbae">64467</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-4c00f3db"><p class="cl-4c00dbde"><span class="cl-4bfcfbae">R2</span></p></td><td class="cl-4c00f3e4"><p class="cl-4c00dbca"><span class="cl-4bfcfbae">0.213</span></p></td><td class="cl-4c00f3e5"><p class="cl-4c00dbca"><span class="cl-4bfcfbae">0.098</span></p></td><td class="cl-4c00f3ee"><p class="cl-4c00dbca"><span class="cl-4bfcfbae"></span></p></td><td class="cl-4c00f3ef"><p class="cl-4c00dbca"><span class="cl-4bfcfbae"></span></p></td><td class="cl-4c00f3f8"><p class="cl-4c00dbca"><span class="cl-4bfcfbae"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-4c00f3f9"><p class="cl-4c00dbde"><span class="cl-4bfcfbae">R2 Adj.</span></p></td><td class="cl-4c00f402"><p class="cl-4c00dbca"><span class="cl-4bfcfbae">0.212</span></p></td><td class="cl-4c00f403"><p class="cl-4c00dbca"><span class="cl-4bfcfbae">0.077</span></p></td><td class="cl-4c00f40c"><p class="cl-4c00dbca"><span class="cl-4bfcfbae"></span></p></td><td class="cl-4c00f40d"><p class="cl-4c00dbca"><span class="cl-4bfcfbae"></span></p></td><td class="cl-4c00f416"><p class="cl-4c00dbca"><span class="cl-4bfcfbae"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-4c00f417"><p class="cl-4c00dbde"><span class="cl-4bfcfbae">R2 Marg.</span></p></td><td class="cl-4c00f420"><p class="cl-4c00dbca"><span class="cl-4bfcfbae"></span></p></td><td class="cl-4c00f421"><p class="cl-4c00dbca"><span class="cl-4bfcfbae"></span></p></td><td class="cl-4c00f42a"><p class="cl-4c00dbca"><span class="cl-4bfcfbae">0.026</span></p></td><td class="cl-4c00f434"><p class="cl-4c00dbca"><span class="cl-4bfcfbae">0.017</span></p></td><td class="cl-4c00f43e"><p class="cl-4c00dbca"><span class="cl-4bfcfbae">0.043</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-4c00f448"><p class="cl-4c00dbde"><span class="cl-4bfcfbae">R2 Cond.</span></p></td><td class="cl-4c00f449"><p class="cl-4c00dbca"><span class="cl-4bfcfbae"></span></p></td><td class="cl-4c00f44a"><p class="cl-4c00dbca"><span class="cl-4bfcfbae"></span></p></td><td class="cl-4c00f452"><p class="cl-4c00dbca"><span class="cl-4bfcfbae">0.197</span></p></td><td class="cl-4c00f45c"><p class="cl-4c00dbca"><span class="cl-4bfcfbae">0.192</span></p></td><td class="cl-4c00f466"><p class="cl-4c00dbca"><span class="cl-4bfcfbae">0.207</span></p></td></tr></tbody><tfoot><tr style="overflow-wrap:break-word;"><td colspan="6" class="cl-4c00f470"><p class="cl-4c00dbde"><span class="cl-4bfcfbae">Notes: OLS or multi-level model coefficients with SEs in parentheses. Country fixed effect estimates omitted from FE model. FE model clusters SEs by country.</span></p></td></tr><tr style="overflow-wrap:break-word;"><td colspan="6" class="cl-4c00f470"><p class="cl-4c00dbde"><span class="cl-4bfcfbae">* p &lt; 0.05; ** p &lt; 0.01; *** p &lt; 0.001</span></p></td></tr></tfoot></table></div>
</div>
</div>
</figure>
</div>
</div>
<p>A few things may stand out here. First, the coefficient for “Personal Financial Situation” is the same in all models in which it appears. This is because fitting a random intercept multi-level model is basically equivalent to fitting a simpler linear regression model with country dummy variables. The random intercept multi-level model allows the intercept to be “random’ (i.e., to take on a different value for each cluster) while still estimating a <em>common</em> (or”fixed”) estimate for the independent variables.<a href="#fn9" class="footnote-ref" id="fnref9" role="doc-noteref"><sup>9</sup></a> We can see this by using the <code>coef()</code> command, which will return the coefficients for the Intercept and for the independent variable(s):</p>
<div class="no-row-height column-margin column-container"><div id="fn9"><p><sup>9</sup>&nbsp;That is, unless we <em>also</em> specify that the coefficient for an IV should be allowed to vary between clusters before being summarized into a single weighted estimate.</p></div></div><div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Different intercept, same slope</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a><span class="fu">coef</span>(mixed_indiv)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$country_name
              (Intercept)       Q50
Andorra          4.582194 0.1817805
Argentina        4.318242 0.1817805
Australia        4.529366 0.1817805
Bangladesh       5.485730 0.1817805
Bolivia          4.366886 0.1817805
Brazil           1.486339 0.1817805
Myanmar          5.431446 0.1817805
Chile            4.362747 0.1817805
China            6.366356 0.1817805
Taiwan ROC       3.948085 0.1817805
Colombia         2.608765 0.1817805
Cyprus           4.020333 0.1817805
Ecuador          4.079620 0.1817805
Ethiopia         3.762728 0.1817805
Germany          5.054844 0.1817805
Greece           3.249699 0.1817805
Guatemala        2.660598 0.1817805
Hong Kong SAR    3.945368 0.1817805
Indonesia        4.920654 0.1817805
Iran             4.597352 0.1817805
Iraq             2.791373 0.1817805
Japan            4.500479 0.1817805
Kazakhstan       5.195977 0.1817805
Jordan           4.433007 0.1817805
South Korea      5.673280 0.1817805
Kyrgyzstan       3.717767 0.1817805
Lebanon          2.931462 0.1817805
Macau SAR        4.411652 0.1817805
Malaysia         4.247233 0.1817805
Mexico           3.162958 0.1817805
New Zealand      4.226980 0.1817805
Nicaragua        3.626962 0.1817805
Nigeria          3.407309 0.1817805
Pakistan         5.101552 0.1817805
Peru             2.631667 0.1817805
Philippines      5.199632 0.1817805
Puerto Rico      2.202826 0.1817805
Romania          2.923390 0.1817805
Russia           4.411431 0.1817805
Serbia           3.567437 0.1817805
Vietnam          6.298000 0.1817805
Zimbabwe         2.930848 0.1817805
Tajikistan       6.789928 0.1817805
Thailand         4.367818 0.1817805
Tunisia          2.853026 0.1817805
Turkey           4.965436 0.1817805
United States    3.284655 0.1817805

attr(,"class")
[1] "coef.mer"</code></pre>
</div>
</div>
<p>The main advantage of the multi-level model is also enabling us to model variation at the country level including the estimation of interactions between levels of analysis (if that is what we want to do).</p>
<p>Second, the coefficient for Country Unemployment Rate is also the same in the Aggregated Model and Multi-Level model where it is the only predictor. Again, this is because the two models are doing the same thing: using variation in country-level unemployment to predict country-level average regime satisfaction. The coefficient for this variable is <em>not</em> the same in the final model, for reasons I’ll discuss in a subsequent sub-section.</p>
<p>Third, we get different types of R<sup>2</sup> for the multi-level models: R2 Marg. (marginal R<sup>2</sup>) and R2 Cond. (conditional R<sup>2</sup>). Calculating an R<sup>2</sup> for a multi-level model is not straightforward (much as it wasn’t for logistic models) but these are attempts to do so anyways. The “marginal” version only takes into account the influence of the “fixed effects” portion of the model, while the “conditional” version takes into account both fixed and random effects. Their interpretation is not very straightforward, but higher is typically “better” (caveats about model specification aside).</p>
</section>
<section id="to-center-or-not-to-center" class="level4 page-columns page-full" data-number="18.2.4.4">
<h4 data-number="18.2.4.4" class="anchored" data-anchor-id="to-center-or-not-to-center"><span class="header-section-number">18.2.4.4</span> To Center or Not to Center?</h4>
<p>One thing that changed in <a href="#tbl-comparison" class="quarto-xref">Table&nbsp;<span>18.1</span></a> was the coefficient for Country Unemployment rate when we switched from a single-variable model (whether OLS or multi-level) to one that includes both that variable and the one with an individual-level predictor (Personal Financial Situation). What is going on there?</p>
<p>Consider these two variables: Personal Financial Situation and Country Unemployment Rate. Both variables pertain to economic conditions in a country. Perhaps more importantly, it seems very plausible that changes in a country’s unemployment rate could impact a person’s (subjective) financial situation. We could perhaps think of the individual measure as being somewhat ‘downstream’ or ‘post-treatment’ of the country level measure!</p>
<p>One way to see this is to look at the relationship between country unemployment rate and country average scores for personal financial situation. <a href="#fig-econ" class="quarto-xref">Figure&nbsp;<span>18.5</span></a> does just this with a negative relationship emerging: people are, on average, less satisfied with their personal financial situation in places with more unemployment.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Get the aggregated data</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>econ_data <span class="ot">&lt;-</span> wvs <span class="sc">|&gt;</span> </span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(country_name) <span class="sc">|&gt;</span> </span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">personal =</span> <span class="fu">mean</span>(Q50, <span class="at">na.rm =</span> T), </span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">country =</span> <span class="fu">mean</span>(unemploytotal, <span class="at">na.rm =</span>T))</span>
<span id="cb55-6"><a href="#cb55-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-7"><a href="#cb55-7" aria-hidden="true" tabindex="-1"></a><span class="co">#Correlation between them using the correlation package</span></span>
<span id="cb55-8"><a href="#cb55-8" aria-hidden="true" tabindex="-1"></a>econ_corr <span class="ot">&lt;-</span> correlation<span class="sc">::</span><span class="fu">correlation</span>(econ_data)</span>
<span id="cb55-9"><a href="#cb55-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-10"><a href="#cb55-10" aria-hidden="true" tabindex="-1"></a><span class="co">#Plot</span></span>
<span id="cb55-11"><a href="#cb55-11" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(econ_data, <span class="fu">aes</span>(<span class="at">x =</span> country, <span class="at">y =</span> personal)) <span class="sc">+</span> </span>
<span id="cb55-12"><a href="#cb55-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb55-13"><a href="#cb55-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">'lm'</span>) <span class="sc">+</span> </span>
<span id="cb55-14"><a href="#cb55-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Country Unemployment Rate"</span>,</span>
<span id="cb55-15"><a href="#cb55-15" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Country Average Personal Financial Situation"</span>) <span class="sc">+</span> </span>
<span id="cb55-16"><a href="#cb55-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span> </span>
<span id="cb55-17"><a href="#cb55-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">10</span>), </span>
<span id="cb55-18"><a href="#cb55-18" aria-hidden="true" tabindex="-1"></a>                     <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)) <span class="sc">+</span> </span>
<span id="cb55-19"><a href="#cb55-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">x =</span> <span class="dv">3</span>, </span>
<span id="cb55-20"><a href="#cb55-20" aria-hidden="true" tabindex="-1"></a>            <span class="at">y =</span> <span class="dv">8</span>, </span>
<span id="cb55-21"><a href="#cb55-21" aria-hidden="true" tabindex="-1"></a>            <span class="at">label =</span> <span class="fu">paste</span>(<span class="st">"Correlation ="</span>, </span>
<span id="cb55-22"><a href="#cb55-22" aria-hidden="true" tabindex="-1"></a>                              <span class="fu">round</span>(econ_corr[<span class="dv">1</span>,<span class="dv">3</span>],<span class="dv">2</span>), </span>
<span id="cb55-23"><a href="#cb55-23" aria-hidden="true" tabindex="-1"></a>                              <span class="at">sep =</span> <span class="st">" "</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="fig-econ" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-econ-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="analysis_clustering_files/figure-html/fig-econ-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-econ-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;18.5: Correlation between Macro and Micro Economic Indicators
</figcaption>
</figure>
</div>
</div>
</div>
<p>This brings us to the subject of this sub-section: to “center” or not to “center”. Centering simply means subtracting a constant value from each observation.<a href="#fn10" class="footnote-ref" id="fnref10" role="doc-noteref"><sup>10</sup></a> One way we could center our data is by subtracting a variable’s mean score from each observation - this is called “grand mean centering”. A different type of centering is perhaps more common and useful in the context of a multi-level: subtracting the <em>cluster</em> mean from each observation within that cluster. For instance, finding the mean among all respondents in Spain (for instance) and subracting that value from the score from each individual Spanish respondent (and so on for the other countries). This can be useful in a multi-level model. Variation on the centered individual-level variable can only represent within-cluster variation on that variable.</p>
<div class="no-row-height column-margin column-container"><div id="fn10"><p><sup>10</sup>&nbsp;You may remember this as part of <em>standardizing</em> a variable wherein we subtract the mean from each observation and then divide by the variable’s standard deviation. In so doing we create a variable with a mean of 0 and a standard deviation of 1.</p></div></div><p>Here is how we can do this in the present instance by using <code>group_by()</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-34"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><span id="annotated-cell-34-1"><a href="#annotated-cell-34-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Center the variable within country</span></span>
<span id="annotated-cell-34-2"><a href="#annotated-cell-34-2" aria-hidden="true" tabindex="-1"></a>wvs <span class="ot">&lt;-</span> wvs <span class="sc">|&gt;</span> </span>
<span id="annotated-cell-34-3"><a href="#annotated-cell-34-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(country_name) <span class="sc">|&gt;</span> </span>
<span id="annotated-cell-34-4"><a href="#annotated-cell-34-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">personal_country_mean =</span> <span class="fu">mean</span>(Q50, <span class="at">na.rm =</span> T)) <span class="sc">|&gt;</span> </span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-34" data-target-annotation="1">1</button><span id="annotated-cell-34-5" class="code-annotation-target"><a href="#annotated-cell-34-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span></span>
<span id="annotated-cell-34-6"><a href="#annotated-cell-34-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">personal_center =</span> Q50 <span class="sc">-</span> personal_country_mean)</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-hidden code-annotation-container-grid">
<dt data-target-cell="annotated-cell-34" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-34" data-code-lines="5" data-code-annotation="1">The <code>ungroup()</code> bit here is important as following <code>group_by()</code> with <code>mutate()</code> can lead to some issues down the line if you don’t then <code>ungroup()</code> the data.</span>
</dd>
</dl>
</div>
</div>
<p>Let’s compare the original variable to the centered one:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>wvs <span class="sc">|&gt;</span> </span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Q50, personal_center) <span class="sc">|&gt;</span> </span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>  psych<span class="sc">::</span><span class="fu">describe</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                vars     n mean   sd median trimmed  mad   min   max range
Q50                1 69238 6.17 2.45   6.00    6.28 2.97  1.00 10.00  9.00
personal_center    2 69238 0.00 2.32   0.03    0.09 2.30 -6.48  6.36 12.83
                 skew kurtosis   se
Q50             -0.32    -0.54 0.01
personal_center -0.30    -0.29 0.01</code></pre>
</div>
</div>
<p>Centering the variable has not meaningfully affected its variance (the standard deviations are basically the same). It has basically just shifted people over so that they vary around a mean of 0.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(wvs, <span class="fu">aes</span>(<span class="at">x =</span> personal_center, <span class="at">y =</span>Q50)) <span class="sc">+</span> </span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> country_name) <span class="sc">+</span> </span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Centered Financial Satisfaction"</span>, </span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Original Scale"</span>) <span class="sc">+</span> </span>
<span id="cb58-6"><a href="#cb58-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="analysis_clustering_files/figure-html/unnamed-chunk-33-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Let’s see how this affects our results:</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Fit model with centered variable</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>mixed_both_center <span class="ot">&lt;-</span> <span class="fu">lmer</span>(Q252 <span class="sc">~</span> personal_center <span class="sc">+</span> unemploytotal <span class="sc">+</span> </span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a>                            (<span class="dv">1</span> <span class="sc">|</span> country_name), <span class="at">data =</span> wvs)</span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a><span class="co">#Table</span></span>
<span id="cb59-6"><a href="#cb59-6" aria-hidden="true" tabindex="-1"></a><span class="co">#List</span></span>
<span id="cb59-7"><a href="#cb59-7" aria-hidden="true" tabindex="-1"></a>model_comps1 <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb59-8"><a href="#cb59-8" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Indiv w/FE"</span> <span class="ot">=</span> model_all_indiv, </span>
<span id="cb59-9"><a href="#cb59-9" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Aggregated"</span> <span class="ot">=</span> model_aggregated, </span>
<span id="cb59-10"><a href="#cb59-10" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Multi-level"</span> <span class="ot">=</span> mixed_indiv, </span>
<span id="cb59-11"><a href="#cb59-11" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Multi-Level"</span> <span class="ot">=</span> mixed_agg, </span>
<span id="cb59-12"><a href="#cb59-12" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Multi-Level"</span> <span class="ot">=</span> mixed_both, </span>
<span id="cb59-13"><a href="#cb59-13" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Multi-Level"</span> <span class="ot">=</span> mixed_both_center)</span>
<span id="cb59-14"><a href="#cb59-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-15"><a href="#cb59-15" aria-hidden="true" tabindex="-1"></a><span class="co">#Table with some flextable formatting</span></span>
<span id="cb59-16"><a href="#cb59-16" aria-hidden="true" tabindex="-1"></a>model_comps_table1 <span class="ot">&lt;-</span> <span class="fu">modelsummary</span>(model_comps1, </span>
<span id="cb59-17"><a href="#cb59-17" aria-hidden="true" tabindex="-1"></a>             <span class="at">estimate =</span> <span class="st">"{estimate}{stars}</span><span class="sc">\n</span><span class="st">{std.error}"</span>, </span>
<span id="cb59-18"><a href="#cb59-18" aria-hidden="true" tabindex="-1"></a>             <span class="at">statistic =</span> <span class="cn">NULL</span>, </span>
<span id="cb59-19"><a href="#cb59-19" aria-hidden="true" tabindex="-1"></a>             <span class="at">gof_map =</span> <span class="fu">c</span>(<span class="st">"nobs"</span>, <span class="st">"r.squared"</span>, <span class="st">"adj.r.squared"</span>, </span>
<span id="cb59-20"><a href="#cb59-20" aria-hidden="true" tabindex="-1"></a>                         <span class="st">"r2.marginal"</span>, <span class="st">"r2.conditional"</span>),</span>
<span id="cb59-21"><a href="#cb59-21" aria-hidden="true" tabindex="-1"></a>             <span class="at">vcov =</span> <span class="fu">c</span>(<span class="sc">~</span> country_name, <span class="st">"classical"</span>, <span class="st">"classical"</span>, </span>
<span id="cb59-22"><a href="#cb59-22" aria-hidden="true" tabindex="-1"></a>                      <span class="st">"classical"</span>, <span class="st">"classical"</span>, <span class="st">"classical"</span>), </span>
<span id="cb59-23"><a href="#cb59-23" aria-hidden="true" tabindex="-1"></a>             <span class="at">coef_map =</span> <span class="fu">c</span>(</span>
<span id="cb59-24"><a href="#cb59-24" aria-hidden="true" tabindex="-1"></a>               <span class="st">"(Intercept)"</span> <span class="ot">=</span> <span class="st">"Intercept"</span>, </span>
<span id="cb59-25"><a href="#cb59-25" aria-hidden="true" tabindex="-1"></a>               <span class="st">"Q50"</span> <span class="ot">=</span> <span class="st">"Personal Financial Situation"</span>, </span>
<span id="cb59-26"><a href="#cb59-26" aria-hidden="true" tabindex="-1"></a>               <span class="st">"personal_center"</span> <span class="ot">=</span> <span class="st">"Personal Financial Situation (Centered)"</span>,</span>
<span id="cb59-27"><a href="#cb59-27" aria-hidden="true" tabindex="-1"></a>               <span class="st">"unemploy"</span> <span class="ot">=</span> <span class="st">"Country Unemployment Rate"</span>, </span>
<span id="cb59-28"><a href="#cb59-28" aria-hidden="true" tabindex="-1"></a>               <span class="st">"unemploytotal"</span> <span class="ot">=</span> <span class="st">"Country Unemployment Rate"</span>), </span>
<span id="cb59-29"><a href="#cb59-29" aria-hidden="true" tabindex="-1"></a>             <span class="at">notes =</span> <span class="fu">list</span>(<span class="st">"Notes: OLS or multi-level model coefficients with SEs in parentheses. Country fixed effect estimates omitted from FE model. Clustered standard errors not taken into account in the first model."</span>, </span>
<span id="cb59-30"><a href="#cb59-30" aria-hidden="true" tabindex="-1"></a>                          <span class="st">"* p &lt; 0.05; ** p &lt; 0.01; *** p &lt; 0.001"</span>),</span>
<span id="cb59-31"><a href="#cb59-31" aria-hidden="true" tabindex="-1"></a>             <span class="at">output =</span> <span class="st">'flextable'</span>)</span>
<span id="cb59-32"><a href="#cb59-32" aria-hidden="true" tabindex="-1"></a>             </span>
<span id="cb59-33"><a href="#cb59-33" aria-hidden="true" tabindex="-1"></a>             </span>
<span id="cb59-34"><a href="#cb59-34" aria-hidden="true" tabindex="-1"></a>model_comps_table1 <span class="sc">|&gt;</span> </span>
<span id="cb59-35"><a href="#cb59-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">hline</span>(<span class="at">i =</span> <span class="fu">nrow_part</span>(model_comps_table1) <span class="sc">-</span> <span class="dv">3</span>) <span class="sc">|&gt;</span></span>
<span id="cb59-36"><a href="#cb59-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">align</span>(<span class="at">i =</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow_part</span>(model_comps_table1), <span class="at">j =</span> <span class="dv">2</span><span class="sc">:</span><span class="fu">ncol_keys</span>(model_comps_table1), <span class="at">align =</span> <span class="st">'center'</span>) <span class="sc">|&gt;</span></span>
<span id="cb59-37"><a href="#cb59-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">align</span>(<span class="at">align =</span> <span class="st">'center'</span>, <span class="at">part =</span> <span class="st">'header'</span>) <span class="sc">|&gt;</span> </span>
<span id="cb59-38"><a href="#cb59-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">autofit</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="tbl-comparison1" class="cell quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-comparison1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;18.2: Comparison with Centered IV
</figcaption>
<div aria-describedby="tbl-comparison1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<div class="tabwid"><style>.cl-57fb01f8{}.cl-57f05f78{font-family:'Arial';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-57f413ac{margin:0;text-align:center;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-57f413c0{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-57f42ebe{width:2.952in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-57f42ed2{width:0.998in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-57f42edc{width:1.075in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-57f42ee6{width:0.973in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-57f42ee7{width:1.024in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-57f42ee8{width:1.066in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-57f42ef0{width:1.109in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-57f42ef1{width:2.952in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-57f42efa{width:0.998in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-57f42efb{width:1.075in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-57f42f04{width:0.973in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-57f42f05{width:1.024in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-57f42f0e{width:1.066in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-57f42f18{width:1.109in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-57f42f19{width:2.952in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-57f42f2c{width:0.998in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-57f42f2d{width:1.075in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-57f42f2e{width:0.973in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-57f42f36{width:1.024in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-57f42f40{width:1.066in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-57f42f4a{width:1.109in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-57f42f4b{width:2.952in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 1pt solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-57f42f54{width:0.998in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 1pt solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-57f42f55{width:1.075in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 1pt solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-57f42f5e{width:0.973in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 1pt solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-57f42f5f{width:1.024in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 1pt solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-57f42f68{width:1.066in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 1pt solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-57f42f69{width:1.109in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 1pt solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-57f42f6a{width:2.952in;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-57f42f72{width:0.998in;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-57f42f7c{width:1.075in;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-57f42f7d{width:0.973in;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-57f42f86{width:1.024in;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-57f42f87{width:1.066in;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-57f42f90{width:1.109in;background-color:transparent;vertical-align: middle;border-bottom: 1pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-57f42f91{width:2.952in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-57f42f92{width:0.998in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-57f42f9a{width:1.075in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-57f42fa4{width:0.973in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-57f42fa5{width:1.024in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-57f42fae{width:1.066in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-57f42fb8{width:1.109in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 1pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-57f42fb9{width:2.952in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-57f42fc2{width:0.998in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-57f42fcc{width:1.075in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-57f42fd6{width:0.973in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-57f42fd7{width:1.024in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-57f42fe0{width:1.066in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-57f42fe1{width:1.109in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-57f42fea{width:2.952in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-57f42ff4{width:0.998in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-57f42ff5{width:1.075in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-57f42ffe{width:0.973in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-57f42fff{width:1.024in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-57f43008{width:1.066in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-57f43009{width:1.109in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-57f4300a{width:2.952in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-57f4300b{width:0.998in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-57f43012{width:1.075in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-57f4301c{width:0.973in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-57f43026{width:1.024in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-57f43027{width:1.066in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-57f43030{width:1.109in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(255, 255, 255, 0.00);border-top: 0 solid rgba(255, 255, 255, 0.00);border-left: 0 solid rgba(255, 255, 255, 0.00);border-right: 0 solid rgba(255, 255, 255, 0.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-57fb01f8"><thead><tr style="overflow-wrap:break-word;"><th class="cl-57f42ebe"><p class="cl-57f413ac"><span class="cl-57f05f78"> </span></p></th><th class="cl-57f42ed2"><p class="cl-57f413ac"><span class="cl-57f05f78">Indiv w/FE</span></p></th><th class="cl-57f42edc"><p class="cl-57f413ac"><span class="cl-57f05f78">Aggregated</span></p></th><th class="cl-57f42ee6"><p class="cl-57f413ac"><span class="cl-57f05f78">Multi-level</span></p></th><th class="cl-57f42ee7"><p class="cl-57f413ac"><span class="cl-57f05f78">Multi-Level</span></p></th><th class="cl-57f42ee8"><p class="cl-57f413ac"><span class="cl-57f05f78">Multi-Level </span></p></th><th class="cl-57f42ef0"><p class="cl-57f413ac"><span class="cl-57f05f78">Multi-Level  </span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-57f42ef1"><p class="cl-57f413c0"><span class="cl-57f05f78">Intercept</span></p></td><td class="cl-57f42efa"><p class="cl-57f413ac"><span class="cl-57f05f78">4.586***</span><br><span class="cl-57f05f78">0.094</span></p></td><td class="cl-57f42efb"><p class="cl-57f413ac"><span class="cl-57f05f78">5.797***</span><br><span class="cl-57f05f78">0.314</span></p></td><td class="cl-57f42f04"><p class="cl-57f413ac"><span class="cl-57f05f78">4.120***</span><br><span class="cl-57f05f78">0.167</span></p></td><td class="cl-57f42f05"><p class="cl-57f413ac"><span class="cl-57f05f78">5.797***</span><br><span class="cl-57f05f78">0.314</span></p></td><td class="cl-57f42f0e"><p class="cl-57f413ac"><span class="cl-57f05f78">4.581***</span><br><span class="cl-57f05f78">0.304</span></p></td><td class="cl-57f42f18"><p class="cl-57f413ac"><span class="cl-57f05f78">5.797***</span><br><span class="cl-57f05f78">0.313</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-57f42f19"><p class="cl-57f413c0"><span class="cl-57f05f78">Personal Financial Situation</span></p></td><td class="cl-57f42f2c"><p class="cl-57f413ac"><span class="cl-57f05f78">0.182***</span><br><span class="cl-57f05f78">0.014</span></p></td><td class="cl-57f42f2d"><p class="cl-57f413ac"><span class="cl-57f05f78"></span></p></td><td class="cl-57f42f2e"><p class="cl-57f413ac"><span class="cl-57f05f78">0.182***</span><br><span class="cl-57f05f78">0.004</span></p></td><td class="cl-57f42f36"><p class="cl-57f413ac"><span class="cl-57f05f78"></span></p></td><td class="cl-57f42f40"><p class="cl-57f413ac"><span class="cl-57f05f78">0.182***</span><br><span class="cl-57f05f78">0.004</span></p></td><td class="cl-57f42f4a"><p class="cl-57f413ac"><span class="cl-57f05f78"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-57f42f19"><p class="cl-57f413c0"><span class="cl-57f05f78">Personal Financial Situation (Centered)</span></p></td><td class="cl-57f42f2c"><p class="cl-57f413ac"><span class="cl-57f05f78"></span></p></td><td class="cl-57f42f2d"><p class="cl-57f413ac"><span class="cl-57f05f78"></span></p></td><td class="cl-57f42f2e"><p class="cl-57f413ac"><span class="cl-57f05f78"></span></p></td><td class="cl-57f42f36"><p class="cl-57f413ac"><span class="cl-57f05f78"></span></p></td><td class="cl-57f42f40"><p class="cl-57f413ac"><span class="cl-57f05f78"></span></p></td><td class="cl-57f42f4a"><p class="cl-57f413ac"><span class="cl-57f05f78">0.182***</span><br><span class="cl-57f05f78">0.004</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-57f42f19"><p class="cl-57f413c0"><span class="cl-57f05f78">Country Unemployment Rate</span></p></td><td class="cl-57f42f2c"><p class="cl-57f413ac"><span class="cl-57f05f78"></span></p></td><td class="cl-57f42f2d"><p class="cl-57f413ac"><span class="cl-57f05f78">-0.090*</span><br><span class="cl-57f05f78">0.041</span></p></td><td class="cl-57f42f2e"><p class="cl-57f413ac"><span class="cl-57f05f78"></span></p></td><td class="cl-57f42f36"><p class="cl-57f413ac"><span class="cl-57f05f78">-0.090*</span><br><span class="cl-57f05f78">0.041</span></p></td><td class="cl-57f42f40"><p class="cl-57f413ac"><span class="cl-57f05f78">-0.074+</span><br><span class="cl-57f05f78">0.040</span></p></td><td class="cl-57f42f4a"><p class="cl-57f413ac"><span class="cl-57f05f78">-0.090*</span><br><span class="cl-57f05f78">0.041</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-57f42f4b"><p class="cl-57f413c0"><span class="cl-57f05f78">Num.Obs.</span></p></td><td class="cl-57f42f54"><p class="cl-57f413ac"><span class="cl-57f05f78">66688</span></p></td><td class="cl-57f42f55"><p class="cl-57f413ac"><span class="cl-57f05f78">45</span></p></td><td class="cl-57f42f5e"><p class="cl-57f413ac"><span class="cl-57f05f78">66688</span></p></td><td class="cl-57f42f5f"><p class="cl-57f413ac"><span class="cl-57f05f78">64727</span></p></td><td class="cl-57f42f68"><p class="cl-57f413ac"><span class="cl-57f05f78">64467</span></p></td><td class="cl-57f42f69"><p class="cl-57f413ac"><span class="cl-57f05f78">64467</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-57f42f6a"><p class="cl-57f413c0"><span class="cl-57f05f78">R2</span></p></td><td class="cl-57f42f72"><p class="cl-57f413ac"><span class="cl-57f05f78">0.213</span></p></td><td class="cl-57f42f7c"><p class="cl-57f413ac"><span class="cl-57f05f78">0.098</span></p></td><td class="cl-57f42f7d"><p class="cl-57f413ac"><span class="cl-57f05f78"></span></p></td><td class="cl-57f42f86"><p class="cl-57f413ac"><span class="cl-57f05f78"></span></p></td><td class="cl-57f42f87"><p class="cl-57f413ac"><span class="cl-57f05f78"></span></p></td><td class="cl-57f42f90"><p class="cl-57f413ac"><span class="cl-57f05f78"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-57f42f91"><p class="cl-57f413c0"><span class="cl-57f05f78">R2 Adj.</span></p></td><td class="cl-57f42f92"><p class="cl-57f413ac"><span class="cl-57f05f78">0.212</span></p></td><td class="cl-57f42f9a"><p class="cl-57f413ac"><span class="cl-57f05f78">0.077</span></p></td><td class="cl-57f42fa4"><p class="cl-57f413ac"><span class="cl-57f05f78"></span></p></td><td class="cl-57f42fa5"><p class="cl-57f413ac"><span class="cl-57f05f78"></span></p></td><td class="cl-57f42fae"><p class="cl-57f413ac"><span class="cl-57f05f78"></span></p></td><td class="cl-57f42fb8"><p class="cl-57f413ac"><span class="cl-57f05f78"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-57f42fb9"><p class="cl-57f413c0"><span class="cl-57f05f78">R2 Marg.</span></p></td><td class="cl-57f42fc2"><p class="cl-57f413ac"><span class="cl-57f05f78"></span></p></td><td class="cl-57f42fcc"><p class="cl-57f413ac"><span class="cl-57f05f78"></span></p></td><td class="cl-57f42fd6"><p class="cl-57f413ac"><span class="cl-57f05f78">0.026</span></p></td><td class="cl-57f42fd7"><p class="cl-57f413ac"><span class="cl-57f05f78">0.017</span></p></td><td class="cl-57f42fe0"><p class="cl-57f413ac"><span class="cl-57f05f78">0.043</span></p></td><td class="cl-57f42fe1"><p class="cl-57f413ac"><span class="cl-57f05f78">0.040</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-57f42fea"><p class="cl-57f413c0"><span class="cl-57f05f78">R2 Cond.</span></p></td><td class="cl-57f42ff4"><p class="cl-57f413ac"><span class="cl-57f05f78"></span></p></td><td class="cl-57f42ff5"><p class="cl-57f413ac"><span class="cl-57f05f78"></span></p></td><td class="cl-57f42ffe"><p class="cl-57f413ac"><span class="cl-57f05f78">0.197</span></p></td><td class="cl-57f42fff"><p class="cl-57f413ac"><span class="cl-57f05f78">0.192</span></p></td><td class="cl-57f43008"><p class="cl-57f413ac"><span class="cl-57f05f78">0.207</span></p></td><td class="cl-57f43009"><p class="cl-57f413ac"><span class="cl-57f05f78">0.215</span></p></td></tr></tbody><tfoot><tr style="overflow-wrap:break-word;"><td colspan="7" class="cl-57f4300a"><p class="cl-57f413c0"><span class="cl-57f05f78">Notes: OLS or multi-level model coefficients with SEs in parentheses. Country fixed effect estimates omitted from FE model. Clustered standard errors not taken into account in the first model.</span></p></td></tr><tr style="overflow-wrap:break-word;"><td colspan="7" class="cl-57f4300a"><p class="cl-57f413c0"><span class="cl-57f05f78">* p &lt; 0.05; ** p &lt; 0.01; *** p &lt; 0.001</span></p></td></tr></tfoot></table></div>
</div>
</div>
</figure>
</div>
</div>
<p>We now get our original estimates back!</p>
<p>Should you center a lower-level variable like this if you run a multi-level variable? This would make most sense to me if the lower-level variable is continuous in nature and there is a plausible case that the lower level variable is being affected by the higher order one.</p>
</section>
<section id="interactions" class="level4 page-columns page-full" data-number="18.2.4.5">
<h4 data-number="18.2.4.5" class="anchored" data-anchor-id="interactions"><span class="header-section-number">18.2.4.5</span> Interactions</h4>
<p>I began this broader section by recommend that you <em>not</em> use a multi-level model <em>unless</em> you want to examine an interaction between a variable measured at one level of analysis and a variable measured at another. In this example, for instance, you might want to examine whether the relationship between personal financial situation and the DV <em>varies</em> based on country context (e.g., maybe it’s bigger when unemployment is high vs.&nbsp;low?). Alternatively, we might want to know whether the effects of unemployment vary based on individual level financial conditions. If that is the type of analysis that your hypothesis is setting up, then a multi-level model is most appropriate.<a href="#fn11" class="footnote-ref" id="fnref11" role="doc-noteref"><sup>11</sup></a></p>
<div class="no-row-height column-margin column-container"><div id="fn11"><p><sup>11</sup>&nbsp;We could try fitting an <code>lm()</code> here with our two variables, their interaction term, and country fixed effects. However, this introduces some severe multicollinearity that can only be avoided by dropping a country-observation. In this example, for instance, R decided to drop observations from the United States in order to estimate the model. Another alternative would be to fit a model with just individual level variables (including the IV we care about) on each country separately, store the coefficient for the IV that we care about from each regression, and then use that as the DV in a subsequent model using country-level predictor variables. This is perhaps simpler in terms of final interpretation since the end result would be a common OLS linear regression, but more effort to set up.</p></div><div id="fn12"><p><sup>12</sup>&nbsp;There is one element of the <code>summary()</code> output that I did not discuss: the “Correlation of Fixed Effects” stuff. I generally wouldn’t worry too much about that. This <a href="https://library.virginia.edu/data/articles/correlation-of-fixed-effects-in-lme4" target="_blank">website</a> goes into what it means in more depth.</p></div></div><p>We include an interaction term in the model in the same way that we do so with <code>lm()</code> or <code>glm()</code> models, via a <code>*</code>. I will use the centered version of the personal finance variable in this example. Here are the results using both <code>summary()</code> and <code>parameters()</code> since the latter will show won’t use scientific notation in this example (well, except for the very small interaction term!).<a href="#fn12" class="footnote-ref" id="fnref12" role="doc-noteref"><sup>12</sup></a></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Mixed Model with interaction</span></span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>mixed_interaction <span class="ot">&lt;-</span> <span class="fu">lmer</span>(Q252 <span class="sc">~</span> personal_center<span class="sc">*</span>unemploytotal <span class="sc">+</span> </span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a>                            (<span class="dv">1</span> <span class="sc">|</span> country_name), <span class="at">data =</span> wvs)</span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-5"><a href="#cb60-5" aria-hidden="true" tabindex="-1"></a><span class="co">#Results</span></span>
<span id="cb60-6"><a href="#cb60-6" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mixed_interaction)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Linear mixed model fit by REML. t-tests use Satterthwaite's method [
lmerModLmerTest]
Formula: Q252 ~ personal_center * unemploytotal + (1 | country_name)
   Data: wvs

REML criterion at convergence: 299319.2

Scaled residuals: 
    Min      1Q  Median      3Q     Max 
-3.1010 -0.7391  0.0229  0.6926  3.4080 

Random effects:
 Groups       Name        Variance Std.Dev.
 country_name (Intercept) 1.350    1.162   
 Residual                 6.054    2.461   
Number of obs: 64467, groups:  country_name, 45

Fixed effects:
                                Estimate Std. Error         df t value Pr(&gt;|t|)
(Intercept)                    5.797e+00  3.135e-01  4.301e+01  18.491   &lt;2e-16
personal_center                1.711e-01  7.699e-03  6.442e+04  22.229   &lt;2e-16
unemploytotal                 -8.974e-02  4.142e-02  4.302e+01  -2.167   0.0358
personal_center:unemploytotal  1.724e-03  1.047e-03  6.442e+04   1.646   0.0998
                                 
(Intercept)                   ***
personal_center               ***
unemploytotal                 *  
personal_center:unemploytotal .  
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Correlation of Fixed Effects:
            (Intr) prsnl_ unmply
persnl_cntr  0.000              
unemployttl -0.833  0.000       
prsnl_cntr:  0.000 -0.840  0.000</code></pre>
</div>
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="fu">parameters</span>(mixed_interaction)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># Fixed Effects

Parameter                       | Coefficient |       SE |         95% CI | t(64461) |      p
---------------------------------------------------------------------------------------------
(Intercept)                     |        5.80 |     0.31 | [ 5.18,  6.41] |    18.49 | &lt; .001
personal center                 |        0.17 | 7.70e-03 | [ 0.16,  0.19] |    22.23 | &lt; .001
unemploytotal                   |       -0.09 |     0.04 | [-0.17, -0.01] |    -2.17 | 0.030 
personal center × unemploytotal |    1.72e-03 | 1.05e-03 | [ 0.00,  0.00] |     1.65 | 0.100 

# Random Effects

Parameter                    | Coefficient
------------------------------------------
SD (Intercept: country_name) |        1.16
SD (Residual)                |        2.46</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>
Uncertainty intervals (equal-tailed) and p-values (two-tailed) computed
  using a Wald t-distribution approximation.</code></pre>
</div>
</div>
<p>Here is a reminder about how to read coefficients in an interaction:</p>
<ul>
<li><code>personal_center</code>: This tells us the estimated relationship between the personal financial situation variable and the DV <em>when unemployment = 0</em>. If we could observe countries where unemployment = 0, then we’d expect regime satisfaction to increase by 0.17 scale points, on average, for each one unit increase in financial situation. We do not observe any such countries, so we should be a bit careful about simply relying on this coefficient to interpret the model.</li>
<li><code>unemploytotal</code>: We centered the financial situation variable such that 0 = country mean. A one unit increase in unemployment when personal financial situation is at the mean level within a country is around -0.09 (so, increasing unemployment = decreasing average regime satisfaction).</li>
<li>Interaction term: The interaction term is 0.0017 or 0.002 when rounding. We could use this to say two different things:
<ul>
<li>The effect for personal situation becomes more positive by 0.002 scale points with every one unit increase in unemployment. In other words, it seems like personal financial situation is more important in countries with more unemployment…but the interaction term is statistically insignificant (p = 0.1) at conventional levels so we cannot rule out the possibility that the slope for financial situation doesn’t change when unemployment changes.</li>
<li>The effect of country unemployment becomes less negative by 0.002 scale points with each one unit increase in personal financial situation. I say less negative because the coefficient for <code>unemploytotal</code> is negative but the interaction term is positive. So, unemployment seems to matter less for those with more financial security…but again, not statistically significant.</li>
</ul></li>
</ul>
<p>As always with interactions we should turn to predicted values or slope estimates to actually make sense of these results (with graphs of these values being an especially good idea):</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="co"># The syntax below uses some R syntax that is a little bit more advanced</span></span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a><span class="co"># than taught in Statistics I and II. Basically, I'm storing the values </span></span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a><span class="co"># I want to make predictions form in a data object and then </span></span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a><span class="co"># directly accessing those values in other syntax calls, instead of writing them </span></span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a><span class="co"># down and then manually entering them. </span></span>
<span id="cb65-6"><a href="#cb65-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-7"><a href="#cb65-7" aria-hidden="true" tabindex="-1"></a><span class="do">##Finding 1 SD &lt; mean, mean, 1 SD &gt; mean for the two variables</span></span>
<span id="cb65-8"><a href="#cb65-8" aria-hidden="true" tabindex="-1"></a><span class="co">#Uses psych::describe to create a dataframe with the mean and sd</span></span>
<span id="cb65-9"><a href="#cb65-9" aria-hidden="true" tabindex="-1"></a>mean_data <span class="ot">&lt;-</span> wvs <span class="sc">|&gt;</span> </span>
<span id="cb65-10"><a href="#cb65-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(personal_center, unemploytotal) <span class="sc">|&gt;</span> </span>
<span id="cb65-11"><a href="#cb65-11" aria-hidden="true" tabindex="-1"></a>  psych<span class="sc">::</span><span class="fu">describe</span>()</span>
<span id="cb65-12"><a href="#cb65-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-13"><a href="#cb65-13" aria-hidden="true" tabindex="-1"></a><span class="co"># I use some base R notation here (the [] stuff) to pass the </span></span>
<span id="cb65-14"><a href="#cb65-14" aria-hidden="true" tabindex="-1"></a><span class="co">#values from the mean_data df into a vector. </span></span>
<span id="cb65-15"><a href="#cb65-15" aria-hidden="true" tabindex="-1"></a><span class="co"># The first number in brackets is the row number for an observation and the second is the column number. So, [1,3] means: get me the value in row 1, column 3. </span></span>
<span id="cb65-16"><a href="#cb65-16" aria-hidden="true" tabindex="-1"></a><span class="co"># I could do all of this manually as well, e.g., unemploy_sdbelow &lt;- 6.22 - 4.07, etc., but I want to get on with it! See the R book on interactions for doing this manually</span></span>
<span id="cb65-17"><a href="#cb65-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-18"><a href="#cb65-18" aria-hidden="true" tabindex="-1"></a>personal_values <span class="ot">&lt;-</span> <span class="fu">c</span>(mean_data[<span class="dv">1</span>,<span class="dv">3</span>] <span class="sc">-</span> mean_data[<span class="dv">1</span>,<span class="dv">4</span>], <span class="co"># mean - sd</span></span>
<span id="cb65-19"><a href="#cb65-19" aria-hidden="true" tabindex="-1"></a>                     mean_data[<span class="dv">1</span>,<span class="dv">3</span>], <span class="co">#mean, </span></span>
<span id="cb65-20"><a href="#cb65-20" aria-hidden="true" tabindex="-1"></a>                     mean_data[<span class="dv">1</span>,<span class="dv">3</span>] <span class="sc">+</span> mean_data[<span class="dv">1</span>,<span class="dv">4</span>]) <span class="co">#mean + sd</span></span>
<span id="cb65-21"><a href="#cb65-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-22"><a href="#cb65-22" aria-hidden="true" tabindex="-1"></a>unemploy_values <span class="ot">&lt;-</span> <span class="fu">c</span>(mean_data[<span class="dv">2</span>,<span class="dv">3</span>] <span class="sc">-</span> mean_data[<span class="dv">2</span>,<span class="dv">4</span>], <span class="co">#mean + sd</span></span>
<span id="cb65-23"><a href="#cb65-23" aria-hidden="true" tabindex="-1"></a>                     mean_data[<span class="dv">2</span>,<span class="dv">3</span>], <span class="co">#mean, </span></span>
<span id="cb65-24"><a href="#cb65-24" aria-hidden="true" tabindex="-1"></a>                     mean_data[<span class="dv">2</span>,<span class="dv">3</span>] <span class="sc">+</span> mean_data[<span class="dv">2</span>,<span class="dv">4</span>]) <span class="co">#mean + sd</span></span>
<span id="cb65-25"><a href="#cb65-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-26"><a href="#cb65-26" aria-hidden="true" tabindex="-1"></a><span class="do">## Predicted Values</span></span>
<span id="cb65-27"><a href="#cb65-27" aria-hidden="true" tabindex="-1"></a><span class="co"># Personal by Country</span></span>
<span id="cb65-28"><a href="#cb65-28" aria-hidden="true" tabindex="-1"></a><span class="co">#Also uses some base R stuff to simplify getting min to max values for</span></span>
<span id="cb65-29"><a href="#cb65-29" aria-hidden="true" tabindex="-1"></a><span class="co">#unemployment. </span></span>
<span id="cb65-30"><a href="#cb65-30" aria-hidden="true" tabindex="-1"></a>plot1 <span class="ot">&lt;-</span> <span class="fu">predictions</span>(mixed_interaction, </span>
<span id="cb65-31"><a href="#cb65-31" aria-hidden="true" tabindex="-1"></a>            <span class="at">newdata =</span> <span class="fu">datagrid</span>(<span class="at">personal_center =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">6</span><span class="sc">:</span><span class="dv">6</span>), </span>
<span id="cb65-32"><a href="#cb65-32" aria-hidden="true" tabindex="-1"></a>                               <span class="at">unemploytotal =</span> unemploy_values)) <span class="sc">|&gt;</span> </span>
<span id="cb65-33"><a href="#cb65-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">unemploytotal =</span> <span class="fu">factor</span>(unemploytotal, </span>
<span id="cb65-34"><a href="#cb65-34" aria-hidden="true" tabindex="-1"></a>                                <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"1 SD &lt; Mean"</span>, </span>
<span id="cb65-35"><a href="#cb65-35" aria-hidden="true" tabindex="-1"></a>                                           <span class="st">"Mean"</span>, </span>
<span id="cb65-36"><a href="#cb65-36" aria-hidden="true" tabindex="-1"></a>                                           <span class="st">"1 SD &gt; Mean"</span>))) <span class="sc">|&gt;</span></span>
<span id="cb65-37"><a href="#cb65-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> personal_center, <span class="at">y =</span> estimate, <span class="at">linetype =</span> unemploytotal)) <span class="sc">+</span> </span>
<span id="cb65-38"><a href="#cb65-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span> </span>
<span id="cb65-39"><a href="#cb65-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_ribbon</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> conf.low, <span class="at">ymax =</span> conf.high), <span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span> </span>
<span id="cb65-40"><a href="#cb65-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"(Centered) Personal Financial Situation"</span>, </span>
<span id="cb65-41"><a href="#cb65-41" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Predicted Value"</span>, </span>
<span id="cb65-42"><a href="#cb65-42" aria-hidden="true" tabindex="-1"></a>       <span class="at">linetype =</span> <span class="st">"Country Unemployment"</span>) <span class="sc">+</span> </span>
<span id="cb65-43"><a href="#cb65-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span> </span>
<span id="cb65-44"><a href="#cb65-44" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>) <span class="sc">+</span> </span>
<span id="cb65-45"><a href="#cb65-45" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">linetype =</span> <span class="fu">guide_legend</span>(<span class="at">nrow =</span> <span class="dv">2</span>))</span>
<span id="cb65-46"><a href="#cb65-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-47"><a href="#cb65-47" aria-hidden="true" tabindex="-1"></a><span class="co"># Country by Personal</span></span>
<span id="cb65-48"><a href="#cb65-48" aria-hidden="true" tabindex="-1"></a>plot2 <span class="ot">&lt;-</span> <span class="fu">predictions</span>(mixed_interaction, </span>
<span id="cb65-49"><a href="#cb65-49" aria-hidden="true" tabindex="-1"></a>            <span class="at">newdata =</span> <span class="fu">datagrid</span>(<span class="at">personal_center =</span> personal_values, </span>
<span id="cb65-50"><a href="#cb65-50" aria-hidden="true" tabindex="-1"></a>                               <span class="at">unemploytotal =</span> mean_data[<span class="dv">2</span>,<span class="dv">8</span>]<span class="sc">:</span>mean_data[<span class="dv">2</span>,<span class="dv">9</span>])) <span class="sc">|&gt;</span> </span>
<span id="cb65-51"><a href="#cb65-51" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">personal_center =</span> <span class="fu">factor</span>(personal_center, </span>
<span id="cb65-52"><a href="#cb65-52" aria-hidden="true" tabindex="-1"></a>                                <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"1 SD &lt; Mean"</span>, </span>
<span id="cb65-53"><a href="#cb65-53" aria-hidden="true" tabindex="-1"></a>                                           <span class="st">"Mean"</span>, </span>
<span id="cb65-54"><a href="#cb65-54" aria-hidden="true" tabindex="-1"></a>                                           <span class="st">"1 SD &gt; Mean"</span>))) <span class="sc">|&gt;</span></span>
<span id="cb65-55"><a href="#cb65-55" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> unemploytotal, <span class="at">y =</span> estimate, <span class="at">linetype =</span> personal_center)) <span class="sc">+</span> </span>
<span id="cb65-56"><a href="#cb65-56" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span> </span>
<span id="cb65-57"><a href="#cb65-57" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_ribbon</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> conf.low, <span class="at">ymax =</span> conf.high), <span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span> </span>
<span id="cb65-58"><a href="#cb65-58" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Country Unemployment Rate"</span>, </span>
<span id="cb65-59"><a href="#cb65-59" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Predicted Value"</span>, </span>
<span id="cb65-60"><a href="#cb65-60" aria-hidden="true" tabindex="-1"></a>       <span class="at">linetype =</span> <span class="st">"Personal Financial"</span>) <span class="sc">+</span> </span>
<span id="cb65-61"><a href="#cb65-61" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span> </span>
<span id="cb65-62"><a href="#cb65-62" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>)  <span class="sc">+</span> </span>
<span id="cb65-63"><a href="#cb65-63" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">linetype =</span> <span class="fu">guide_legend</span>(<span class="at">nrow =</span> <span class="dv">2</span>))</span>
<span id="cb65-64"><a href="#cb65-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-65"><a href="#cb65-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-66"><a href="#cb65-66" aria-hidden="true" tabindex="-1"></a><span class="do">##Slopes</span></span>
<span id="cb65-67"><a href="#cb65-67" aria-hidden="true" tabindex="-1"></a>plot3 <span class="ot">&lt;-</span> <span class="fu">avg_slopes</span>(mixed_interaction, </span>
<span id="cb65-68"><a href="#cb65-68" aria-hidden="true" tabindex="-1"></a>                    <span class="at">variables =</span> <span class="st">"personal_center"</span>, </span>
<span id="cb65-69"><a href="#cb65-69" aria-hidden="true" tabindex="-1"></a>                    <span class="at">by =</span> <span class="st">"unemploytotal"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb65-70"><a href="#cb65-70" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> unemploytotal, <span class="at">y =</span> estimate)) <span class="sc">+</span> </span>
<span id="cb65-71"><a href="#cb65-71" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span> </span>
<span id="cb65-72"><a href="#cb65-72" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_ribbon</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> conf.low, <span class="at">ymax =</span> conf.high), </span>
<span id="cb65-73"><a href="#cb65-73" aria-hidden="true" tabindex="-1"></a>              <span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span> </span>
<span id="cb65-74"><a href="#cb65-74" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">0</span>, <span class="at">linetype =</span> <span class="st">'dashed'</span>, <span class="at">color =</span> <span class="st">'red'</span>) <span class="sc">+</span> </span>
<span id="cb65-75"><a href="#cb65-75" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Country Unemployment"</span>,</span>
<span id="cb65-76"><a href="#cb65-76" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"AME for Personal Financial Situation"</span>) <span class="sc">+</span> </span>
<span id="cb65-77"><a href="#cb65-77" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span>
<span id="cb65-78"><a href="#cb65-78" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb65-79"><a href="#cb65-79" aria-hidden="true" tabindex="-1"></a>plot4 <span class="ot">&lt;-</span> <span class="fu">avg_slopes</span>(mixed_interaction, </span>
<span id="cb65-80"><a href="#cb65-80" aria-hidden="true" tabindex="-1"></a>           <span class="at">variables =</span> <span class="st">"unemploytotal"</span>, </span>
<span id="cb65-81"><a href="#cb65-81" aria-hidden="true" tabindex="-1"></a>           <span class="at">by =</span> <span class="st">"personal_center"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb65-82"><a href="#cb65-82" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> personal_center, <span class="at">y =</span> estimate)) <span class="sc">+</span> </span>
<span id="cb65-83"><a href="#cb65-83" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span> </span>
<span id="cb65-84"><a href="#cb65-84" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_ribbon</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> conf.low, <span class="at">ymax =</span> conf.high), </span>
<span id="cb65-85"><a href="#cb65-85" aria-hidden="true" tabindex="-1"></a>              <span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb65-86"><a href="#cb65-86" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">0</span>, <span class="at">linetype =</span> <span class="st">'dashed'</span>, <span class="at">color =</span> <span class="st">'red'</span>) <span class="sc">+</span> </span>
<span id="cb65-87"><a href="#cb65-87" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"(Centered) Personal Financial Situation"</span>,</span>
<span id="cb65-88"><a href="#cb65-88" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"AME for Country Unemployment"</span>) <span class="sc">+</span> </span>
<span id="cb65-89"><a href="#cb65-89" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span>
<span id="cb65-90"><a href="#cb65-90" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb65-91"><a href="#cb65-91" aria-hidden="true" tabindex="-1"></a><span class="co">#Combining</span></span>
<span id="cb65-92"><a href="#cb65-92" aria-hidden="true" tabindex="-1"></a>plot3 <span class="sc">+</span> plot4 <span class="sc">+</span> plot1 <span class="sc">+</span> plot2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="fig-interactions" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-interactions-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="analysis_clustering_files/figure-html/fig-interactions-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-interactions-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;18.6: Predicted Values and AMEs from the Interaction Model
</figcaption>
</figure>
</div>
</div>
</div>
<p>The top part of <a href="#fig-interactions" class="quarto-xref">Figure&nbsp;<span>18.6</span></a> show the average marginal effect of personal financial situation by unemployment (left) or unemployment by personal financial situation (right). We can see that the effect of a person’s personal financial situation is expected to increase in size as we move from countries with less to countries with more unemployment…but the change is quite wee. Likewise, we the effect of country unemployment is more negative among those with very poor financial situations (e.g., around -4 or -5) than among those with better ones (e.g., around 4 or 5)…but the change in effect is very wee and there is a lot of uncertainty here. This is brought home further by the predicted values plots on the bottom where we get nearly parallel lines. It would be hard to see these results and say that macro and micro economic conditions interact!</p>
</section>
<section id="assumptions" class="level4" data-number="18.2.4.6">
<h4 data-number="18.2.4.6" class="anchored" data-anchor-id="assumptions"><span class="header-section-number">18.2.4.6</span> Assumptions</h4>
<p>We can use some of our same old toosl to check assumptions for a linear mixed model (e.g., <code>resid_panel()</code> and <code>car::vif()</code>), although <code>car::avPlots()</code> will not work. You can find a walk through of how to check assumptions for these types of models via this helpful <a href="https://www.learn-mlms.com/12-module-12.html" target="_blank">guide</a>.</p>
</section>
</section>
<section id="what-about-logit-models" class="level3" data-number="18.2.5">
<h3 data-number="18.2.5" class="anchored" data-anchor-id="what-about-logit-models"><span class="header-section-number">18.2.5</span> What about Logit Models?</h3>
<p>The discussions above focus on situations where our DV is (assumed to be) continuous (interval/ratio) in nature. What about if our DV is binary? The same basic considerations apply:</p>
<ul>
<li>Is the relationship you’re interested in testing something that varies at the lower level of aggregation (e.g., between individuals)? Then focus on a single cluster or use fixed effects.</li>
<li>Is the relationship of interest primarily at the higher level of aggregation (e.g., between countries)? Then recode the DV to be 0/1, find the mean by cluster, and regress that on your predictor variables. The DV here would vary continuously between 0 and 1, so a linear regression model would likely be sufficient.</li>
<li>Do you need or want a more complicated solution? Then you could fit a mixed effects/multi-level logistic model instead (see <a href="https://stats.oarc.ucla.edu/r/dae/mixed-effects-logistic-regression/" target="_blank">here</a>).</li>
</ul>


</section>
</section>


</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      const annoteTargets = window.document.querySelectorAll('.code-annotation-anchor');
      for (let i=0; i<annoteTargets.length; i++) {
        const annoteTarget = annoteTargets[i];
        const targetCell = annoteTarget.getAttribute("data-target-cell");
        const targetAnnotation = annoteTarget.getAttribute("data-target-annotation");
        const contentFn = () => {
          const content = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          if (content) {
            const tipContent = content.cloneNode(true);
            tipContent.classList.add("code-annotation-tip-content");
            return tipContent.outerHTML;
          }
        }
        const config = {
          allowHTML: true,
          content: contentFn,
          onShow: (instance) => {
            selectCodeLines(instance.reference);
            instance.reference.classList.add('code-annotation-active');
            window.tippy.hideAll();
          },
          onHide: (instance) => {
            unselectCodeLines();
            instance.reference.classList.remove('code-annotation-active');
          },
          maxWidth: 300,
          delay: [50, 0],
          duration: [200, 0],
          offset: [5, 10],
          arrow: true,
          appendTo: function(el) {
            return el.parentElement.parentElement.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'quarto',
          placement: 'right',
          popperOptions: {
            modifiers: [
            {
              name: 'flip',
              options: {
                flipVariations: false, // true by default
                allowedAutoPlacements: ['right'],
                fallbackPlacements: ['right', 'top', 'top-start', 'top-end', 'bottom', 'bottom-start', 'bottom-end', 'left'],
              },
            },
            {
              name: 'preventOverflow',
              options: {
                mainAxis: false,
                altAxis: false
              }
            }
            ]        
          }      
        };
        window.tippy(annoteTarget, config); 
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./analysis_robust.html" class="pagination-link" aria-label="Heteroskedasticity and Robust Standard Errors">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Heteroskedasticity and Robust Standard Errors</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./analysis_mlogit.html" class="pagination-link" aria-label="Categorical DVs">
        <span class="nav-page-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Categorical DVs</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




</body></html>